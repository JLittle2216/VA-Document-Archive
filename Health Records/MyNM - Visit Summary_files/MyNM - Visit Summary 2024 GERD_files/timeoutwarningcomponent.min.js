/*! Copyright (c) Epic Systems Corporation 2014-2021 */
$$WPComp.TimeoutWarningComponent=function WPComp$TimeoutWarningComponent(e){var t,i;$$WP.Strings.setDefaultNamespace("Core.TimeOutPopup"),t=$$WP.HyperspaceSession?"FromHyperspace":WP.Events.showBeforeUnloadMessage()?"WithChanges":"TimeOut",this.PreHtml=e.Html||e.Text||$$WP.Strings.get(t+"Message"),this.Html=this.PreHtml,$$WPComp.applySettings(e,this),this._SecondsAtStart=Math.floor(this.SecondsLeft)||60,$$WP.Strings.addMnemonic("@MYCHART@SecondsLeft@",this._SecondsAtStart.toString()),i=$$WP.HyperspaceSession?[new $$WPComp.ComplexObjects.Button(this.StayString||$$WP.Strings.getForTemplate("FromHyperspaceStayButtonText"),null,"","stay")]:this.isPreLogin?[new $$WPComp.ComplexObjects.Button(this.StayString||$$WP.Strings.getForTemplate("PreLoginStayButtonText"),null,"","stay"),new $$WPComp.ComplexObjects.Button(this.LeaveString||$$WP.Strings.getForTemplate("PreLoginLogOutButtonText"),null,"inlinedelete","leave")]:[new $$WPComp.ComplexObjects.Button(this.StayString||$$WP.Strings.getForTemplate("StayButtonText"),null,"","stay"),new $$WPComp.ComplexObjects.Button(this.LeaveString||$$WP.Strings.getForTemplate("LogOutButtonText"),null,"inlinedelete","leave")],this._clickContext=this._clickContext||this,this.TitleText=this.TitleText||$$WP.Strings.getForTemplate(t+"Title"),this.ToolbarButtons=i,this.Components$Component(),$$WP.Strings.removeMnemonic("@MYCHART@SecondsLeft@"),$$WP.Strings.clearDefaultNamespace(),$.proxy(this._createScreenReaderAlert(),this),this._timer=$.proxy(this._timer,this),this._TimerId=window.setTimeout(this._timer,1e3),this.$content.safeAttr("aria-hidden",!0),this._D0=new Date,this.addEventListener("click",this.clickTimeoutWarning),$$WPComp.TimeoutWarningComponent.hasVisibleInstance=!0,removeCalendarExternal()},$$WPComp.TimeoutWarningComponent.prototype={ToolbarButtons:null,SecondsLeft:60,StayString:null,LeaveString:null,IsClosable:!0,isPreLogin:!1,preLoginRedirectURL:null,_SecondsAtStart:Number,_D0:new Date,_TimerId:Number,_isFirstTime:!0,Class:"timeoutwarning",clickTimeoutWarning:function WPComp$TimeoutWarningComponent$_click(e){if(e.dataId)return e.dataId===$$WPComp.TOOLBARIDENTIFIER+"leave"&&$$WPComp.TimeoutWarningComponent.leaveClick(this.isPreLogin,!1,this.preLoginRedirectURL),this.dispose(!0),!1},_timer:function WPComp$TimeoutWarningComponent$_timer(){var e,t;if(!1!==this.isVisible())if($afe.select(".Popup").removeAttr("aria-live"),(i=$afe.select("#screenReaderAlertTimeout")).innerHTML=this.PreHtml,e=new Date,(t=Math.floor(this._SecondsAtStart-Math.round((e-this._D0)/1e3,0)))<=0)$$WPComp.TimeoutWarningComponent.leaveClick(this.isPreLogin,!0,this.preLoginRedirectURL),this.dispose(!0);else{var i;if($$WP.Strings.setDefaultNamespace("Core.TimeOutPopup"),this._timerId=window.setTimeout(this._timer,1e3),t%10==0||this._isFirstTime)this._isFirstTime=!1,(i=$afe.select("#screenReaderAlertTimeout")).innerHTML=this.PreHtml,$$WP.Strings.addMnemonic("@MYCHART@SecondsLeft@",t.toString()),$$WP.Strings.setDisplayText(i,"Message"),$$WP.Strings.removeMnemonic("@MYCHART@SecondsLeft@");$$WP.Strings.addMnemonic("@MYCHART@SecondsLeft@",t.toString()),this.html(this.PreHtml),$$WP.Strings.removeMnemonic("@MYCHART@SecondsLeft@"),$$WP.Strings.clearDefaultNamespace()}else this.dispose(!0)},dispose:function WPComp$TimeoutWarningComponent$dispose(e){this._isDisposed||(window.clearTimeout(this._timerId),this._timerId=null,this.Components$Component$dispose(e),$$WPUtil.setActivity(),checkActivity(),$$WP.Strings.getNamespace("Core.TimeOutPopup").removeMnemonic("@MYCHART@SecondsLeft@"),$$WPComp.TimeoutWarningComponent.hasVisibleInstance=!1)},_createScreenReaderAlert:function WPComp$TimeoutWarningComponent$createScreenReaderAlert(){$$WP.Strings.setDefaultNamespace("Core.TimeOutPopup");var e=this.$content,t=e.clone();t.addClass("clearlabel"),t.safeAttr("id","screenReaderAlertTimeout"),this.$container.safeAppend(t),(e=$afe.select("#screenReaderAlertTimeout")).innerHTML=this.PreHtml,$$WP.Strings.addMnemonic("@MYCHART@SecondsLeft@",this._SecondsAtStart.toString()),$$WP.Strings.setDisplayText(e,"TimeOutMessage"),$$WP.Strings.removeMnemonic("@MYCHART@SecondsLeft@"),t.safeAttr("aria-hidden",!1),t.safeAttr("aria-live","assertive"),t.safeAttr("aria-relevant","additions"),t.safeAttr("aria-atomic",!0),$$WP.Strings.clearDefaultNamespace()}},$$WPComp.TimeoutWarningComponent.leaveClick=function WPComp$TimeoutWarningComponent$leaveClick(e,t,i){var n;WP.Events.cancelBeforeUnload(),e?window.location!==window.parent.location?document.location.href=document.location.href:$$WPUtil.IsNullOrEmpty(i)?window.location.reload(!1):window.location.href=i:(n=new $$WPComp.LoggingOutComponent("",t),new $$WPContain.Popup({positioningFunction:$$WPContain.Positions.InsideCentered,Components:n,Class:"logout"}).show(!0))},$$WPComp.TimeoutWarningComponent.extend("Components.Component");