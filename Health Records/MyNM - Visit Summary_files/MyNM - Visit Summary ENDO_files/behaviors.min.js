/*! Copyright (c) Epic Systems Corporation 2014 - 2016 */
$$WPUtil.guaranteeExistence($$WP,"Behaviors");var $$WPBehav=$$WP.Behaviors;$$WPBehav.AnimateHeights={add:function WPBehav$AnimateHeights$add(e){var t,i,a,n,s,h,o,g;if(s=e.$container.get(0),t=WP.DOM.Read.getStyle(s,"height"),i=WP.DOM.Read.getStyle(s,"max-height"),a=WP.DOM.Read.getStyle(s,"min-height"),e.$container.on(WP.Events.TRANSITION_END_STR,null,(function(e){e&&e.target&&!$afe.jq(e.target).hasClass("component")||($afe.jq(this).removeClass("capped"),$afe.jq(window).trigger("componentRendered"),$afe.select("#footer").removeClass("moving"))})),(g=e.$container.closest(".filledContainer")).length||(g=null),n=t.indexOf("%")>-1?parseFloat(t,10):$$WPUtil.cssValueToPixels(t),!isNaN(n)){if(t.indexOf("%")>-1){if(!g)throw"Components with a percentage based height must be a child (or child of a child) of an element with the filledContainer class.  The percentage of the height will be a percentage of this filled container's height.";return g.on("resize",{percentage:n/100,of:g,component:e},this._recalculatePercentageBasedHeight),void(e.__$heightHolder=g)}return e.$container.css("height",n+"px"),e.addEventListener("resize",this._maintainFixedHeight),void(g&&g.css("height",Math.max(g.contentHeight(),n)+"px"))}o=$$WPUtil.cssValueToPixels(a),e.$container.css("height",o+"px"),g&&g.css("height",Math.max(g.contentHeight(),o)+"px"),h=$$WPUtil.cssValueToPixels(i),isNaN(h)?h=99999:99999!==h&&e.$content.css("overflow","hidden"),o!==h?(e._animationData={$heightHolder:g,minHeight:o,maxHeight:h,component:e},e.addEventListener("resize",this._adjustHeightToFitContent)):e.addEventListener("resize",this._maintainFixedHeight)},remove:function(e){e.removeEventListener("resize",this._adjustHeightToFitContent),e.removeEventListener("resize",this._maintainFixedHeight),e.__$heightHolder&&e.__$heightHolder.off("resize",this._recalculatePercentageBasedHeight)},_maintainFixedHeight:function WPBehav$AnimateHeights$_maintainFixedHeight(e){var t,i;t=$afe.jq(e.currentTarget),i=$$WPUtil.cssValueToPixels(t.css("height")),$$WPComp.getInstance(t.safeAttr("data-component-id")).capHeight(i)},_adjustHeightToFitContent:function WPBehav$AnimateHeights$_adjustHeightToFitContent(e,t){var i,a=!1;return t&&(isNaN(t.delta)?a=!0===t.forceShrink:(i=isNaN(this.__containerTargetHeight)?$$WPUtil.cssValueToPixels(this.$container.css("height")):this.__containerTargetHeight,(i+=t.delta)<0&&(i=0),this.__containerTargetHeight=i,this.$container.css("height",i+"px"),!0===t.allowGrowth&&(i=""))),$$WPBehav.AnimateHeights._setAppropriateHeight(this.$container,this._animationData.minHeight,this._animationData.maxHeight,this._animationData.$heightHolder,i,a),!1},_recalculatePercentageBasedHeight:function WPBehav$AnimateHeights$_recalculatePercentageBasedHeight(e){var t;t=$$WPUtil.cssValueToPixels(e.data.of.inlineStyle("height"))*e.data.percentage,isNaN(t)&&(t=(e.data.of.contentHeight()-$afe.jq(this).heightMargin())*e.data.percentage),$$WPBehav.AnimateHeights._setAppropriateHeight(e.data.component.$container,t,t,null,t)},_setAppropriateHeight:function WPBehav$AnimateHeights$_setAppropriateHeight(e,t,i,a,n,s){var h,o,g,r,c,l;h=e.get(0).style.height,r=a&&a.length,t=t||0,i=i||99999,l=$$WPComp.getInstance(e.safeAttr("data-component-id")),e.addClass("isanimating"),($$WPUtil.isNaN(n)||n<0)&&(c=e.children(".content"),$$WPComp.isComponent(l)&&!isNaN(l.__containerTargetHeight)?l.__containerTargetHeight:$$WPUtil.cssValueToPixels(c.css("height")),c.css("height","auto"),s&&e.css("height","auto"),n=e.contentHeight(),s&&e.css("height",h),r&&(n=Math.max(n,$$WPUtil.cssValueToPixels(a.inlineStyle("height"))))),e.removeClass("isanimating"),o=Math.min(Math.max(t,n),i),g=l.__containerTargetHeight!==o,l.__containerTargetHeight=o,o+="px",g?(s||(e.addClass("capped"),$afe.select("#footer").addClass("moving"),setTimeout((function(){$afe.select("#footer").removeClass("moving")}),500)),e.css("height",o),e.hasClass("component")&&!isNaN(i)&&(l.capHeight(i),a&&a.inlineStyle("height")!==o&&(a.css("height",o),a.find(".component").trigger("resize")))):99999!==i&&l.capHeight(i)}},$$WP.Behaviors.matchRowHeights=function(e,t){var i,a,n="",s=0,h=0,o=0;e.find(t).each((function(){var g=$afe.jq(this);0!==g.length&&(i=g.outerHeight(),a=g.offset().top,g.css("min-height",i),h!==a?((s+=1)>1&&e.find(t+"."+n).css("height",o),n="row"+s,h=a,o=i):o<i&&(o=i),g.addClass(n)),""!==n&&e.find(t+"."+n).css("height",o)}))};