/*! Copyright (c) Epic Systems Corporation 2016-2018 */
$$WPComp.InlineLoadingComponentWithSources=function WPComp$InlineLoadingComponentWithSources(t){this.Components$TemplateComponent(t),null!==this.AreaName&&(this.Url=makeLink("Loading/GetStatus?AreaName="+this.AreaName)),this.addEventListener("resize",this._resize),$$WP.CommunityUtilities.hasCommunityLinks()||(this.Url="")},$$WPComp.InlineLoadingComponentWithSources.prototype={CommunicationsIndicator:!1,$PermanentParent:null,Url:makeLink("Loading/GetStatus"),template:$$WP.Templates.Core.loading,IsClosable:!1,TitleText:null,ToolbarButtons:null,Class:"inlineloading withsources",stopGetStatus:!1,AreaName:null,statusIsCount:!1,setData:function(t){t.DataFromMultipleSources=!0,this.Components$TemplateComponent$setData(t),this.success(t)},success:function WPComp$InlineLoadingComponentWithSources$success(t){$$WP.Strings.setDefaultNamespace("community.externaljump");var n,e,i,s,o=0,a="";if($$WP.CommunityUtilities.hasCommunityLinks()){if(t&&t.Organizations&&t.Organizations.length>0&&!this.stopGetStatus){for(i=0;i<t.Organizations.length;i++){var r=t.Organizations[i];if(1!==r.Status&&7!==r.Status){if(r.Organization&&null!==r.Organization.OrganizationName){s=r.Organization;break}}else o++}o===t.Organizations.length&&(n=$$WP.Strings.get("CommunityLoadingStatus")),s||(s=t.Organizations[0].Organization),$$WP.Strings.setOrganization(s),$$WP.Strings.addMnemonic("@MYCHART@LOADEDORGS@",o),$$WP.Strings.addMnemonic("@MYCHART@TOTALORGS@",t.Organizations.length),e=$$WP.Strings.get("CommunityLoadingStatusWithCounter"),n=$$WP.Strings.get("CommunityLoadingStatus"),$$WP.Strings.removeMnemonic("@MYCHART@LOADEDORGS@"),$$WP.Strings.removeMnemonic("@MYCHART@TOTALORGS@"),$$WP.Strings.clearOrganization(),a=this.statusIsCount?n:e,this.statusIsCount=!this.statusIsCount,this._status=a,this.$content.find(".loadingStatus.loading").animate({opacity:0},350,(function(){$afe.jq(this).empty().safeAppend(a)})).animate({opacity:1},350)}this.stopGetStatus||setTimeout($.proxy((function(){getCSRFTokenAsQS($.proxy((function(){this.makeRequest({success:this.success,dataType:"json",type:"POST",url:this.Url},"getStatus")}),this))}),this),300),$$WP.Strings.clearDefaultNamespace()}},show:function WPComp$InlineLoadingComponentWithSources$show(t){t=this.$PermanentParent||t,0===this.$container.parent().length&&this.$container.safeInsertBefore(t.children(".content")),this.$container.removeClass("resized"),this.Components$TemplateComponent$show()},hide:function WPComp$InlineLoadingComponentWithSources$hide(t){var n;this.DataFromMultipleSources?(this.stopGetStatus=!0,this.$container.find(".loadingStatus").remove(),this.$container.find(".loadingExt").removeClass("loading").addClass("loaded"),n=$$WP.SimpleTemplates.Div({class:"subtlecolor loadingStatus","aria-hidden":"true"}),$$WP.Strings.setDisplayText(n,"CommunityLoadedMessage","community.externaljump"),this.$content.safeAppend(n),this.$container.addClass("loaded").on("transitionend",(function(t){if(t&&t.target&&!$afe.jq(this).hasClass("resized")&&$afe.jq(this).hasClass("loaded")){var n=$afe.jq(this).parent(".component:not(.inlineloading)").first();n&&($afe.jq(n).trigger("resize",{forceShrink:!0}),$afe.jq(this).addClass("resized"),$afe.jq(n).css("height",""))}}))):this.Components$TemplateComponent$hide()},refresh:function WPComp$InlineLoadingComponentWithSources$refresh(){this.$container.removeClass("loaded resized"),this.Components$TemplateComponent$refresh()},_resize:function(){return!1}},$$WPComp.InlineLoadingComponentWithSources.extend("Components.TemplateComponent");