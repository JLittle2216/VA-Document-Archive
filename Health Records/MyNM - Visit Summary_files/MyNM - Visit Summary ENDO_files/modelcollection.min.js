/*! Copyright (c) Epic Systems Corporation 2016 */
!function WP$Common$ModelCollection$definition(){var e=$$WP.Common.Model,t=function WP$Common$ModelCollection(e,t,n){var i,a,s,d,l,c,h;for(e=e||[],t=t||[],n=n||[],i=$$WP.Debug.UnitTest.assert,this._indexDefinitions={},this._indexDefinitionsByProperty={},this._indices={},this._monitoredProperties={},this._monitoredEvents={add:[],remove:[]},this._modelId2listenerId={},this._indexedProperties={},this._mutexRules={},this.Models=[],this._changeBatch={changesMap:{},changeEventData:{},openBatchCounter:0,collectionEvents:{}},this._onPropertyChanged=$.proxy(this._onPropertyChanged,this),a=0;a<e.length;a++){for(d=(s=new o(e[a])).propertyNames,l=0;l<d.length;l++)i(-1===(c=d[l]).indexOf(","),"Indexed property names cannot contain commas. It will corrupt the index definitions."),this._indexedProperties[c]=!0,this._indexDefinitionsByProperty[c]=this._indexDefinitionsByProperty[c]||[],this._indexDefinitionsByProperty[c].push(s);this._indexDefinitions[s.indexName]=s,this._indices[s.indexName]={}}for(a=0;a<t.length;a++)c=t[a],this.addMonitoredProperty(c);for(a=0;a<n.length;a++){if(void 0===(h=new r(n[a],this)).indexDefinition)return void $$WP.Debug.logError("'"+c+"' is not indexed by itself and therefore cannot have mutex rules.");this._mutexRules[h.propertyName]=this._mutexRules[h.propertyName]||{},this._mutexRules[h.propertyName][h.value]=h}},n={_indexDefinitions:null,_indexDefinitionsByProperty:null,_indices:null,_monitoredProperties:null,_monitoredEvents:null,_modelId2listenerId:null,_changeBatch:null,_indexedProperties:null,_mutexRules:null,Models:null,empty:function WP$Common$ModelCollection$empty(){var e;for(this.openChangeBatch();this.Models.length>0;)e=this.Models[0],this.remove(e);this.closeChangeBatch()},add:function WP$Common$ModelCollection$add(e){var n,o;for(n in o=e.addPropertyListener("",this._onPropertyChanged),this._modelId2listenerId[e.ModelId]=o,this.Models.push(e),this._indexDefinitions)this._addToIndex(this._indexDefinitions[n],e);this._onCollectionEvent(t.AddEvent)},addRange:function WP$Common$ModelCollection$addRange(e){this.openChangeBatch();for(var t=0;t<e.length;t++)this.add(e[t]);this.closeChangeBatch()},remove:function WP$Common$ModelCollection$remove(e){var n;if(-1!==this.Models.indexOf(e)){for(n in e.removePropertyListener(this._modelId2listenerId[e.ModelId]),this.Models.splice(this.Models.indexOf(e),1),this._indexDefinitions)this._removeFromIndex(this._indexDefinitions[n],e,e);this._onCollectionEvent(t.RemoveEvent)}},removeRange:function WP$Common$ModelCollection$removeRange(e){this.openChangeBatch();for(var t=0;t<e.length;t++)this.remove(e[t]);this.closeChangeBatch()},getFromIndex:function WP$Common$ModelCollection$getFromIndex(e,t,n){var o,r,i,a,s,l;if(Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]),r=e.join(",")+",","object"!=typeof(i=this._indices[r]))return $$WP.Debug.logError("Index does not exist for "+r),null;if(e.length!==t.length)return $$WP.Debug.logError("Each specified property name must have a corresponding value"),null;if(null===(a=d(i,t,!1)))"set"===(s=this._indexDefinitions[r]).storeAs?a={size:0}:"array"===s.storeAs&&(a=[]);else if(!0===n)if("set"===(s=this._indexDefinitions[r]).storeAs){for(o in l={},a)l[o]=a[o];a=l}else"array"===s.storeAs&&(a=a.slice());return a},getFirstInIndex:function WP$Common$ModelCollection$getFirstInIndex(e,t){var n=this.getFromIndex(e,t);return null===n?null:("size"in n&&(n=i(n)),Array.isArray(n)&&(n=0===n.length?null:n[0]),n)},getIndex:function WP$Common$ModelCollection$getIndex(e){var t;return"string"==typeof e&&(e=[e]),t=e.join(",")+",",this._indices[t]||null},sortByIndex:function WP$Common$ModelCollection$sortByIndex(e){if(!this._indexedProperties[e])throw"["+e+"] is not an indexed property on this collection.";this.Models=this.Models.sort((function(t,n){return t[e]-n[e]}))},addMonitoredProperty:function WP$Common$ModelCollection$addMonitoredProperty(e){Array.isArray(this._monitoredProperties[e])||(this._monitoredProperties[e]=[])},addPropertyListener:function WP$Common$ModelCollection$addPropertyListener(e,t,n){var o;if(Array.isArray(this._monitoredProperties[e])){if("function"==typeof t)return o={callback:t,contextData:n,listenerId:a++},this._monitoredProperties[e].push(o),o.listenerId;$$WP.Debug.logError("Property change listener must be a function")}else $$WP.Debug.logError(e+" is not a monitorable property.")},removePropertyListener:function WP$Common$ModelCollection$removePropertyListener(e,t){var n,o;if(n=this._monitoredProperties[e],Array.isArray(n))for(o=0;o<n.length;o++)if(n[o].listenerId===t)return void n.splice(o,1)},addCollectionEventListener:function WP$Common$ModelCollection$addCollectionEventListener(e,t,n){var o;if("function"==typeof t)return o={callback:t,contextData:n,listenerId:s++},this._monitoredEvents[e].push(o),o.listenerId;$$WP.Debug.logError("Event listener must be a function")},removeCollectionEventListener:function WP$Common$ModelCollection$removeCollectionEventListener(e,t){var n,o;if(n=this._monitoredEvents[e],Array.isArray(n))for(o=0;o<n.length;o++)if(n[o].listenerId===t)return void n.splice(o,1)},openChangeBatch:function WP$Common$ModelCollection$openChangeBatch(){this._changeBatch.openBatchCounter++},closeChangeBatch:function WP$Common$ModelCollection$closeChangeBatch(){var t,n,o,r,i,a,s,d,l,c,h,m,u,g,p,y,f,x,I;if(0!==this._changeBatch.openBatchCounter)if(this._changeBatch.openBatchCounter--,this._changeBatch.openBatchCounter<0)$$WP.Debug.logError("Tried to close the change batch, but there wasn't one open.");else if(!(this._changeBatch.openBatchCounter>0)){for(o in t=[],n=this._changeBatch.changesMap)t.push(o);for(t.sort(),r=0;r<t.length;r++){for(g in o=t[r],i=e.getInstance(o),a=n[o],s={},this._indexedProperties)void 0!==a[g]?s[g]=a[g].from:s[g]=i[g];for(g in d={},a)if(c=this._indexDefinitionsByProperty[g],!$$WPUtil.IsNullOrEmpty(c))for(l=0;l<c.length;l++)d[c[l].indexName]=!0;for(h in d)m=this._indexDefinitions[h],this._removeFromIndex(m,s,i),this._addToIndex(m,i)}for(f in y=this._changeBatch.collectionEvents,u=this._changeBatch.changeEventData,this._changeBatch={changesMap:{},changeEventData:{},openBatchCounter:0,collectionEvents:{}},y)for(x in this._monitoredEvents[f])(I=this._monitoredEvents[f][x]).callback(I.contextData);for(g in u){for(o in u[g])(p=u[g][o]).from===p.to&&delete u[g][o];$.isEmptyObject(u[g])||this._invokePropertyListeners(g,u[g])}}},size:function WP$Common$ModelCollection$size(){return this.Models.length},contains:function WP$Common$ModelCollection$contains(e){return-1!==this.Models.indexOf(e)},toArray:function WP$Common$ModelCollection$toArray(){return this.Models},toRawObjectArray:function WP$Common$ModelCollection$toRawObjectArray(){var e,t=[];for(e=0;e<this.Models.length;e++)t[e]=this.Models[e].toRawObject();return t},_onCollectionEvent:function WP$Common$ModelCollection$_onCollectionEvent(e){var t,n;if(this._changeBatch.openBatchCounter>0)this._changeBatch.collectionEvents[e]=!0;else for(t in this._monitoredEvents[e])(n=this._monitoredEvents[e][t]).callback(n.contextData)},_invokePropertyListeners:function WP$Common$ModelCollection$_invokePropertyListeners(e,t){var n,o,r;if(n=this._monitoredProperties[e],Array.isArray(n))for(r=0;r<n.length;r++)(o=n[r]).callback(t,o.contextData)},_addToIndex:function WP$Common$ModelCollection$_addToIndex(e,t){var n,o,r,i,a,s;for(o=e.propertyNames,i=r=this._indices[e.indexName],n=0;n<o.length-1;n++)null!==(a=t[o[n]])&&"object"==typeof a&&$$WP.Debug.logError("Indices will not work if the indexed value is a non-null object."),i=r[a]||{},r[a]=i,r=i;s=t[o[o.length-1]],"set"===e.storeAs?(i[s]=i[s]||{size:0},i[s][t.ModelId]=!0,i[s].size++):"array"===e.storeAs?(i[s]=i[s]||[],i[s].push(t)):i[s]=t},_removeFromIndex:function WP$Common$ModelCollection$_removeFromIndex(e,t,n){var o,r,i,a,s,l;for(r=e.propertyNames||[],i=[],o=0;o<r.length;o++)i[o]=t[r[o]];a=i[i.length-1],s=this._indices[e.indexName],null!==(l=d(s,i,!0))&&("set"===e.storeAs?(l[a]=l[a]||{size:0},l[a][n.ModelId]&&(delete l[a][n.ModelId],l[a].size--)):"array"===e.storeAs?(l[a]=l[a]||[],l[a].splice(l[a].indexOf(n),1),0===l[a].length&&delete l[a]):delete l[a])},_getMutexRule:function WP$Common$ModelCollection$_getMutexRule(e,t){var n=this._mutexRules[e]||{};return(n=n[t])||null},_onPropertyChanged:function WP$Common$ModelCollection$_onPropertyChanged(e){var t,n,o,r,i,a,s,d,l,c,h;if(n=(t=e.model).ModelId,o=e.propertyName,r=this._indexedProperties[o],i=Array.isArray(this._monitoredProperties[o]),r||i){if(null!==(a=this._getMutexRule(e.propertyName,e.to))&&null!==(h=this.getFirstInIndex(o,a.value))&&h[o]===a.value&&h!==t)return this.openChangeBatch(),h.setProperty(o,a.bumpToValue),this._onPropertyChanged(e),void this.closeChangeBatch();if(this._changeBatch.openBatchCounter>0)(s=this._changeBatch.changesMap)[n]=s[n]||{},s[n][o]=s[n][o]||{from:e.from},s[n][o].to=e.to,i&&((d=this._changeBatch.changeEventData)[o]=d[o]||{},d[o][n]=s[n][o],d[o][n].model=t);else{if(r){for(l=this._indexDefinitionsByProperty[o],t[o]=e.from,c=0;c<l.length;c++)this._removeFromIndex(l[c],t,t);for(t[o]=e.to,c=0;c<l.length;c++)this._addToIndex(l[c],t)}i&&((d={})[n]=e,this._invokePropertyListeners(o,d))}}},getKeyValueFormat:function WP$Common$ModelCollection$getKeyValueFormat(e){var t,n,o;for(o={},t=0;t<this.Models.length;t++)o[(n=this.Models[t])[e]]=n;return o}},o=function WP$Common$ModelCollection$IndexDefinition(e){var t=e.propertyNames;this.storeAs=e.storeAs,Array.isArray(t)||(t=[t]),this.propertyNames=t,this.indexName=this.propertyNames.join(",")+","};o.prototype={indexName:null,storeAs:null,propertyNames:null};var r=function WP$Common$ModelCollection$MutexRule(e,t){this.propertyName=e.propertyName,this.value=e.value,this.bumpToValue=e.bumpToValue,this.modelCollection=t,this.indexDefinition=t._indexDefinitions[this.propertyName+","]};r.prototype={propertyName:null,value:null,bumpToValue:null,indexDefinition:null,modelCollection:null};var i=function WP$Common$ModelCollection$modelIdSet2Array(t,n){var o,r,i;for(o in i=[],t)!0===t[o]&&null!==(r=e.getInstance(o))&&(n?i.push(r.toRawObject()):i.push(r));return i},a=1,s=1,d=function WP$Common$ModelCollection$s_traverseIndex(e,t,n){var o,r;for(o=e,r=0;r<t.length-1;r++)if(o=o[t[r]],"object"!==$.type(o))return null;return n?o:o[t[t.length-1]]||null};t.prototype=n,t.modelIdSet2Array=i,t.IndexDefinition=o,t.MutexRule=r,t.AddEvent="add",t.RemoveEvent="remove",$$WP.Common=$$WP.Common||{},$$WP.Common.ModelCollection=t,t.extend($$WP.BaseObject,"WP$Common$ModelCollection")}(),$$WP.Debug.UnitTest=$$WP.Debug.UnitTest||{},$$WP.Debug.UnitTest.tests=$$WP.Debug.UnitTest.tests||[],$$WP.Debug.UnitTest.tests.push((function UnitTests$Common$ModelCollection(e){var t,n,o,r,i,a,s;r=$$WP.Debug.UnitTest.assert,t=$$WP.Common.Model,n=$$WP.Common.ModelCollection;var d=function UnitTest$isSizedSet(e){return $.isPlainObject(e)&&e.hasOwnProperty("size")};!function UnitTest$Common$ModelCollection$DefineTesterClass(){(o=function WP$Common$ModelCollection$Tester(e){this.WP$Common$Model(e),this.Selected=!1}).prototype={s_dataMembers:["Id","Name","Value"],Id:null,Name:null,Value:null,Selected:null},o.extend($$WP.Common.Model,"WP$Common$ModelCollection$Tester"),i=[{propertyNames:"Selected",storeAs:"set"},{propertyNames:"Id",storeAs:"single"},{propertyNames:"Name",storeAs:"array"},{propertyNames:"Value",storeAs:"set"},{propertyNames:["Value","Id"],storeAs:"single"},{propertyNames:["Id","Value"],storeAs:"single"},{propertyNames:["Id","Name","Value"],storeAs:"single"}],a=["Value"],s=[{propertyName:"Selected",value:!0,bumpToValue:!1}]}(),function UnitTest$Common$ModelCollection$BasicFunctionality(){var e,t,d;d=new n(i,a,s),r(0===d.size(),"size() did not return 0 for a newly created ModelCollection"),r(Array.isArray(d.Models)&&0===d.Models.length,"The Models property on the new ModelCollection was not properly initialized as an empty array"),e=new o({Id:1,Name:"tester1",Value:"a"}),d.add(e),r(1===d.size(),"size() did not return 1 as expected after a call to add()"),r(Array.isArray(d.Models)&&1===d.Models.length,"The Models property was not an array of length 1 as expected after the call to add()"),r(Array.isArray(d.Models)&&d.Models[0]===e,"The value of Models[0] did not match the expected value after the call to add()"),t=new o({Id:2,Name:"tester2",Value:"b"}),d.add(t),r(2===d.size(),"size() did not return 2 as expected after the second call to add()"),r(Array.isArray(d.Models)&&2===d.Models.length,"The Models property was not an array of length 2 as expected after the second call to add()"),r(Array.isArray(d.Models)&&d.Models[0]===e,"The value of Models[0] did not match the expected value after the second call to add()"),r(Array.isArray(d.Models)&&d.Models[1]===t,"The value of Models[1] did not match the expected value after the second call to add()"),d.remove(e),r(1===d.size(),"size() did not return 1 as expected after the a call to remove()"),r(Array.isArray(d.Models)&&1===d.Models.length,"The Models property was not an array of length 1 as expected after a call to remove()"),r(Array.isArray(d.Models)&&d.Models[0]===t,"The value of Models[0] did not match the expected value after the call to add()"),d.remove(t),r(0===d.size(),"size() did not return 0 as expected after the a call to remove()"),r(Array.isArray(d.Models)&&0===d.Models.length,"The Models property was not an array of length 0 as expected after a call to remove()"),e.dispose()}(),function UnitTest$Common$ModelCollection$Indexing(){var e,l,c,h;h=new n(i,a,s),e=new o({Id:1,Name:"tester1",Value:"a"}),h.add(e),r(t.getInstance(e.ModelId)===e,"ModelId--\x3einstance map was not correctly updated when instance was first added to the collection."),c=h.getFromIndex("Id",1),r(c===e,"[Id] (single) index was not correctly updated on first instance added."),c=h.getFromIndex("Name","tester1"),r(Array.isArray(c)&&1===c.length&&c[0]===e,"[Name] (array) index was not correctly updated on first instance added."),c=h.getFromIndex("Value","a"),r(d(c)&&1===c.size&&c[e.ModelId],"[Value] (set) index was not correctly updated on first instance added."),l=new o({Id:2,Name:"tester2",Value:"a"}),h.add(l),c=h.getFromIndex("Value","a"),r(d(c)&&2===c.size&&c[e.ModelId]&&c[l.ModelId],"[Value] (set) index was not correctly updated when a second instance with the same value was added."),e.setProperty("Id",-1),c=h.getFromIndex("Id",1),r(null===c,"[Id] (single) index was not correctly cleared under 1 when the instance's Id property changed from 1 to -1"),c=h.getFromIndex("Id",-1),r(c===e,"[Id] (single) index was not correctly set under -1 when the instance's Id property changed from 1 to -1"),e.setProperty("Name","tester2"),c=h.getFromIndex("Name","tester1"),r(Array.isArray(c)&&0===c.length,"[Name] (array) index was not correctly cleared under 'tester1' when the instance's Name property changed from 'tester1' to 'tester2'"),c=h.getFromIndex("Name","tester2"),r(Array.isArray(c)&&2===c.length&&c[0]===l&&c[1]===e,"[Name] (array) index was not correctly set under 'tester2' when the instance's Name property changed from 'tester1' to 'tester2'"),e.setProperty("Value","b"),c=h.getFromIndex("Value","a"),r(d(c)&&1===c.size&&!c[e.ModelId]&&c[l.ModelId],"[Value] (set) index did not correctly remove the instance from the value 'a'"),c=h.getFromIndex("Value","b"),r(d(c)&&1===c.size&&c[e.ModelId],"[Value] (set) index did not correctly move the instance to the value 'b'"),c=h.getFromIndex("Id",-1,!0),r(c===e,"[Id] (single) index: failed to ignore the asCopy=true flag in getFromIndex(). "),c=h.getFromIndex("Name","tester2",!0),r(Array.isArray(c)&&2===c.length&&c[0]===l&&c[1]===e&&c!==h.getFromIndex("Name","tester2")&&c!==h.getFromIndex("Name","tester2",!0)&&h.getFromIndex("Name","tester2")==h.getFromIndex("Name","tester2"),"[Name] (array) index: failed to get a copy of the index storage structure from getFromIndex()"),c=h.getFromIndex("Value","b",!0),r(d(c)&&1===c.size&&c[e.ModelId]&&c!==h.getFromIndex("Value","b")&&c!==h.getFromIndex("Value","b",!0)&&h.getFromIndex("Value","b")==h.getFromIndex("Value","b"),"[Value] (set) index: failed to get a copy of the index storage structure from getFromIndex()"),c=h.getFirstInIndex("Id",-1),r(c===e,"[Id] (single) index failed to get the correct instance with getFirstInIndex"),c=h.getFirstInIndex("Name","tester2"),r(c===l,"[Name] (array) index failed to get the correct instance with getFirstInIndex"),c=h.getFirstInIndex("Value","b"),r(c===e,"[Value] (set) index failed to get the correct instance with getFirstInIndex"),c=h.getFromIndex(["Id","Value"],[e.Id,e.Value]),r(c===e,"[Id, Value] (single) index did not contain the expected instance."),c=h.getFromIndex(["Id","Name","Value"],[e.Id,e.Name,e.Value]),r(c===e,"[Id, Name, Value] (single) index did not contain the expected instance."),e.setProperty("Id",1),e.setProperty("Name","tester1"),c=h.getFromIndex(["Id","Value"],[e.Id,e.Value]),r(c===e,"[Id, Value] (single) index did not contain the expected instance."),c=h.getFromIndex(["Id","Name","Value"],[e.Id,e.Name,e.Value]),r(c===e,"[Id, Name, Value] (single) index did not contain the expected instance."),h.remove(e),h.remove(l),c=h.getFromIndex("Id",e.Id),r(null===c,"[Id] (single) index did not properly remove the removed instance"),c=h.getFromIndex(["Id","Value"],[e.Id,e.Value]),r(null===c,"[Id, Value] (single) index did not properly remove the removed instance."),c=h.getFromIndex(["Id","Name","Value"],[e.Id,e.Name,e.Value]),r(null===c,"[Id, Name, Value] (single) index did not properly remove the removed instance."),c=h.getFromIndex("Id","no instances have this Id"),r(null===c,"[Id] (single) index did not return null for a value for which it had no instances"),c=h.getFromIndex("Name","no instances have this Name"),r(Array.isArray(c)&&0===c.length,"[Name] (array) index did not return an empty array for a value for which it had no instances"),c=h.getFromIndex("Value","no instances have this Value"),r(d(c)&&0===c.size,"[Value] (set) index did not return an empty set for a value for which it had no instances"),e.dispose(),l.dispose()}(),function UnitTest$Common$ModelCollection$ChangeBatch(){var e,t,d;function checkIndexUnchanged(){t=d.getFirstInIndex("Id",1),r(t===e,"The instance was already removed from its original index location by changes made in an open change batch."),t=d.getFirstInIndex("Name","tester1"),r(t===e,"The instance was already removed from its original index location by changes made in an open change batch."),t=d.getFirstInIndex("Value","a"),r(t===e,"The instance was already removed from its original index location by changes made in an open change batch."),t=d.getFirstInIndex("Id",2),r(null===t,"The instance was already moved to its new index location by changes made in an open change batch."),t=d.getFirstInIndex("Name","tester2"),r(null===t,"The instance was already moved to its new index location by changes made in an open change batch."),t=d.getFirstInIndex("Value","b"),r(null===t,"The instance was already moved to its new index location by changes made in an open change batch.")}d=new n(i,a,s),e=new o({Id:1,Name:"tester1",Value:"a"}),d.add(e),d.openChangeBatch(),d.openChangeBatch(),e.setProperty("Id",2),e.setProperty("Name","tester2"),e.setProperty("Value","b"),checkIndexUnchanged(),d.closeChangeBatch(),checkIndexUnchanged(),d.closeChangeBatch(),function checkIndexChanged(){t=d.getFirstInIndex("Id",1),r(null===t,"The instance was not removed from its original index location when the change batch was closed."),t=d.getFirstInIndex("Name","tester1"),r(null===t,"The instance was not removed from its original index location when the change batch was closed."),t=d.getFirstInIndex("Value","a"),r(null===t,"The instance was not removed from its original index location when the change batch was closed."),t=d.getFirstInIndex("Id",2),r(t===e,"The instance was already moved to its new index location by changes made in an open change batch."),t=d.getFirstInIndex("Name","tester2"),r(t===e,"The instance was already moved to its new index location by changes made in an open change batch."),t=d.getFirstInIndex("Value","b"),r(t===e,"The instance was already moved to its new index location by changes made in an open change batch.")}(),d.openChangeBatch(),d.remove(e),t=d.getFirstInIndex("Id",2),r(null===t,"The instance was not removed from the index during removal. This should happen even if a change batch is open."),t=d.getFirstInIndex("Name","tester2"),r(null===t,"The instance was not removed from the index during removal. This should happen even if a change batch is open."),t=d.getFirstInIndex("Value","b"),r(null===t,"The instance was not removed from the index during removal. This should happen even if a change batch is open."),e.dispose()}(),function UnitTest$Common$ModelCollection$Mutex(){var e,t,d;d=new n(i,a,s),e=new o({Id:1,Name:"tester1",Value:"a"}),t=new o({Id:2,Name:"tester2",Value:"b"}),d.add(e),d.add(t),e.setProperty("Selected",!0),r(!0===e.Selected&&!1===t.Selected,"Initially setting an instance to be selected failed"),t.setProperty("Selected",!0),r(!1===e.Selected&&!0===t.Selected,"Mutual exclusion did not behave as expected when setting the second instance to be selected"),d.remove(t),e.setProperty("Selected",!0),r(!0===e.Selected&&!0===t.Selected,"Mutual exclusion did not behave as expected with disposed instances"),e.dispose(),t.dispose()}(),function UnitTest$Common$ModelCollection$PropertyMonitor(){var e,t,d,l,c,h,m,u;t=function(e,t){c=e,l=t,d=!0},m={},(u=new n(i,a,s)).addPropertyListener("Value",t,m),e=new o({Id:1,Name:"tester1",Value:"a"}),u.add(e),u.openChangeBatch(),e.setProperty("Value","b"),r(!d,"Callback was invoked during an open change batch"),e.setProperty("Value","a"),u.closeChangeBatch(),r(!d,"Callback was invoked after a change batch closed even though the net change was nothing"),u.openChangeBatch(),e.setProperty("Value","b"),e.setProperty("Value","c"),u.closeChangeBatch(),h=c[e.ModelId],r(d&&l===m&&"object"===$.type(h)&&"a"===h.from&&"c"===h.to,"Callback was not correctly invoked after multiple changes inside of a change batch."),e.dispose()}()}));