/*! Copyright (c) Epic Systems Corporation 2016 */
!function WP$Utilities$UI$SidebarManager$definition(){var e={},t=function WP$Utilities$UI$SidebarManager$SidebarWidget(e,t,i,s){this.id=d++,this._template=e,this._priority=i,this._shown=s,this._addToStaticStructures(),this._$container=$$WP.SimpleTemplates.Div({class:"jqHidden"}),n=n||$afe.select("#sidebar"),1===r?n.safeAppend(this._$container):this===a?this._$container.safeInsertBefore(this._next._$container):this._$container.safeInsertAfter(this._previous._$container),this.update(t),this._shown&&this._$container.show()},i={ViewModel:null,_template:null,_priority:null,_$container:null,_previous:null,_next:null,_shown:!0,update:function WP$Utilities$UI$SidebarManager$s_SidebarWidget$update(e){this._$container.empty(),this._$container.safeAppend($afe.renderTemplate(this._template,e)),this.ViewModel=e},show:function WP$Utilities$UI$SidebarManager$s_SidebarWidget$show(){this._shown||(this._$container.show(),this._shown=!0)},hide:function WP$Utilities$UI$SidebarManager$s_SidebarWidget$hide(){this._shown&&(this._$container.hide(),this._shown=!1)},remove:function WP$Utilities$UI$SidebarManager$s_SidebarWidget$remove(){this._$container.remove(),this===a?a=this._next:(this._previous._next=this._next,null!==this._next&&(this._next._previous=this._previous)),r--},_addToStaticStructures:function WP$Utilities$UI$SidebarManager$_addToStaticStructures(){var e,t;if(null===a)a=this;else if(this._priority<a._priority)this._next=a,a._previous=this,a=this;else{for(t=a,e=a;null!==e&&this._priority>=e._priority;)t=e,e=e._next;this._next=t._next,this._previous=t,t._next=this,null!==this._next&&(this._next._previous=this)}r++}},n=null,d=0,a=null,r=0;t.prototype=i,e.addWidget=function WP$Utilities$UI$SidebarManager$addWidget(e,i,n,d){return new t(e,i,n,!d)},e.numberOfWidgets=function WP$Utilities$UI$SidebarManager$numberOfWidgets(){return r},t.extend($$WP.BaseObject,"WP$Utilities$UI$SidebarWidget"),$$WP.Utilities.UI.SidebarWidget=t,$$WP.Utilities.UI.SidebarManager=e}(),$$WP.Debug.UnitTest=$$WP.Debug.UnitTest||{},$$WP.Debug.UnitTest.tests=$$WP.Debug.UnitTest.tests||[],$$WP.Debug.UnitTest.tests.push((function UnitTests$Utilities$UI$SidebarManager(e){var t,i,n,d,a,r,s,o,g,h,l,c,W,f,u,b,m,$,v;t=$$WP.Debug.UnitTest.assert,i=$$WP.Debug.UnitTest.assertValue,n=$$WP.Utilities.UI.SidebarManager,SidebarWidget=$$WP.Utilities.UI.SidebarWidget,s=function(e){return'<div data-name="'+e.name+'" data-content="'+e.content+'"> Widget '+e.name+" priority: "+e.priority+" content: "+e.content+"</div>"},b={name:"Widget1",priority:10,content:"A"},m={name:"Widget2",priority:5,content:"C"},$={name:"Widget3",priority:5,content:"D"},v={name:"Widget4",priority:-1,content:"E"},0!=(r=$afe.select("#sidebar")).length?(a=r.children().length,d=n.numberOfWidgets(),o=n.addWidget(s,b,b.priority),c=r.find('div[data-name="Widget1"]'),t(SidebarWidget.isInstance(o),"addWidget() did not return a valid SidebarWidget instance for Widget1"),i(d+1,n.numberOfWidgets(),"The result of numberOfWidgets() did not increment after adding Widget1"),i(a+1,r.children().length,"addWidget() did not cause the number of elements directly contained by the sidebar to increase by 1"),i(1,c.length,"Did not find the rendered version of Widget1 in the sidebar after adding it using addWidget()"),i("A",c.safeAttr("data-content"),"The rendered version of Widget1 did not contain the expected value in the data-content attribute"),t(c.is(":visible"),"Widget1 was not rendered shown by default"),o.hide(),t(!c.is(":visible"),"Widget1 was not hidden by the call to hide()"),o.show(),t(c.is(":visible"),"Widget1 was not shown by the call to show()"),o.hide(),b.content="B",o.update(b),c=r.find('div[data-name="Widget1"]'),i(d+1,n.numberOfWidgets(),"update() changed the widget count"),i(a+1,r.children().length,"update() changed the number of child elements of the sidebar"),i(1,c.length,"Unable to find Widget1 in the sidebar after calling update() "),i(b.content,c.safeAttr("data-content"),"The rendered version of Widget1 did not contain the expected value in the data-content attribute"),t(!c.is(":visible"),"update() made Widget1 visible when it should not have"),o.show(),g=n.addWidget(s,m,m.priority),c=r.find('div[data-name="Widget1"]'),W=r.find('div[data-name="Widget2"]'),t(SidebarWidget.isInstance(g),"addWidget() did not return a valid SidebarWidget instance for Widget2"),i(d+2,n.numberOfWidgets(),"The result of numberOfWidgets() did not increment after adding Widget2"),i(a+2,r.children().length,"addWidget() did not cause the number of elements directly contained by the sidebar to increase by 1"),i(1,W.length,"Did not find the rendered version of Widget2 in the sidebar after adding it using addWidget()"),i(m.content,W.safeAttr("data-content"),"The rendered version of Widget2 did not contain the expected value in the data-content attribute"),i(1,c.length,"Did not find the rendered version of Widget1 in the sidebar after adding Widget2 using addWidget()"),i(b.content,c.safeAttr("data-content"),"The rendered version of Widget1 did not contain the expected value in the data-content attribute after calling addWidget() to add Widget2"),t(W.parent().next().get(0)===c.parent().get(0),"Widget2 was not inserted directly before Widget1 in the DOM"),h=n.addWidget(s,$,$.priority),c=r.find('div[data-name="Widget1"]'),W=r.find('div[data-name="Widget2"]'),f=r.find('div[data-name="Widget3"]'),t(SidebarWidget.isInstance(h),"addWidget() did not return a valid SidebarWidget instance for Widget3"),i(d+3,n.numberOfWidgets(),"The result of numberOfWidgets() did not increment after adding Widget3"),i(a+3,r.children().length,"addWidget() did not cause the number of elements directly contained by the sidebar to increase by 1"),i(1,f.length,"Did not find the rendered version of Widget3 in the sidebar after adding it using addWidget()"),i($.content,f.safeAttr("data-content"),"The rendered version of Widget3 did not contain the expected value in the data-content attribute"),t(f.parent().next().get(0)===c.parent().get(0),"Widget3 was not inserted directly before Widget1 in the DOM"),t(W.parent().next().get(0)===f.parent().get(0),"Widget3 was not inserted directly after Widget2 in the DOM"),o.remove(),c=r.find('div[data-name="Widget1"]'),i(d+2,n.numberOfWidgets(),"The result of numberOfWidgets() did not decrement after removing Widget1"),i(a+2,r.children().length,"remove() did not cause the number of elements directly contained by the sidebar to decrease by 1"),i(0,c.length,"Widget1 was still found in the sidebar after calling remove()"),t(0===f.parent().next().length,"Widget3 still had something after it in the sidebar"),t(W.parent().next().get(0)===f.parent().get(0),"Widget3 is not directly after Widget2 in the DOM"),g.remove(),W=r.find('div[data-name="Widget2"]'),i(d+1,n.numberOfWidgets(),"The result of numberOfWidgets() did not decrement after removing Widget2"),i(a+1,r.children().length,"remove() did not cause the number of elements directly contained by the sidebar to decrease by 1"),i(0,W.length,"Widget2 was still found in the sidebar after calling remove()"),t(0===f.parent().next().length,"Widget3 was not the last element in the sidebar though it is the last remaining widget"),l=n.addWidget(s,v,v.priority),f=r.find('div[data-name="Widget3"]'),u=r.find('div[data-name="Widget4"]'),t(SidebarWidget.isInstance(l),"addWidget() did not return a valid SidebarWidget instance for Widget4"),i(d+2,n.numberOfWidgets(),"The result of numberOfWidgets() did not increment after adding Widget4"),i(a+2,r.children().length,"addWidget() did not cause the number of elements directly contained by the sidebar to increase by 1"),i(1,u.length,"Did not find the rendered version of Widget4 in the sidebar after adding it using addWidget()"),i(v.content,u.safeAttr("data-content"),"The rendered version of Widget4 did not contain the expected value in the data-content attribute"),t(u.parent().next().get(0)===f.parent().get(0),"Widget4 was not inserted directly before Widget3 in the DOM"),h.remove(),f=r.find('div[data-name="Widget3"]'),i(d+1,n.numberOfWidgets(),"The result of numberOfWidgets() did not decrement after removing Widget3"),i(a+1,r.children().length,"remove() did not cause the number of elements directly contained by the sidebar to decrease by 1"),i(0,f.length,"Widget3 was still found in the sidebar after calling remove()"),t(0===u.parent().next().length,"Widget4 was not the last element in the sidebar though it is the last remaining widget"),l.remove(),u=r.find('div[data-name="Widget4"]'),i(d,n.numberOfWidgets(),"The result of numberOfWidgets() did not decrement after removing Widget4"),i(a,r.children().length,"remove() did not cause the number of elements directly contained by the sidebar to decrease by 1"),i(0,u.length,"Widget4 was still found in the sidebar after calling remove()")):t(!0,"Skip test")}));