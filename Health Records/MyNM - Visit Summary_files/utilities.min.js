$$WP.Utilities=$$WP.Utilities||{};var $$WPUtil=$$WP.Utilities;$$WPUtil._lightboxFadeDelay=200,$$WPUtil.SetupRadioLabels=function(){$afe.select('input[type="radio"]').change((function(){$.each($afe.select('input[type="radio"][name="'+$afe.jq(this).safeAttr("name")+'"]'),(function(t,e){$afe.select('label[for="'+$afe.jq(e).safeAttr("id")+'"]').removeClass("selected")})),$afe.select('label[for="'+$afe.jq(this).safeAttr("id")+'"]').addClass("selected")})).focus((function(){$afe.select('label[for="'+$afe.jq(this).safeAttr("id")+'"]').addClass("focused")})).blur((function(){$afe.select('label[for="'+$afe.jq(this).safeAttr("id")+'"]').removeClass("focused")})),$afe.select(".radiolabel").click((function(){}))},$$WPUtil.SetupRadioLabelsInContainer=function(t,e){null!==t&&(t.find('input[type="radio"]').change((function(){$.each(t.find('input[type="radio"][name="'+$afe.jq(this).safeAttr("name")+'"]'),(function(e,i){t.find('label[for="'+$afe.jq(i).safeAttr("id")+'"]').removeClass("selected")})),t.find('label[for="'+$afe.jq(this).safeAttr("id")+'"]').addClass("selected"),null!==e&&e(this)})).focus((function(){t.find('label[for="'+$afe.jq(this).safeAttr("id")+'"]').addClass("focused")})).blur((function(){t.find('label[for="'+$afe.jq(this).safeAttr("id")+'"]').removeClass("focused")})),t.find(".radiolabel").click((function(){})))},$$WPUtil.SetDropdownContents=function(t,e,i,n){var o;$$WPUtil.IsNullOrEmpty(t)||$$WPUtil.IsNullOrEmpty(e)||(n&&(e=JSON.parse(e)),o=[],$.each(e,(function(t,e){o.push('<option value="'+t+'">'+e+"</option>")})),t.empty(),dangerou$.setHtml(t,o.join()),i&&o.length<2?t.prop("disabled",!0):t.prop("disabled",!1))},$$WPUtil.SmoothScrollToElement=function(t,e,i,n){$$WPUtil.SmoothScrollToElementWithOffset(t,e,0,i,n)},$$WPUtil.SmoothScrollToElementWithOffset=function(t,e,i,n,o){var l,r;if($$WPUtil.IsNullOrEmpty(e)||0===e.length)throw"Cannot scroll to an empty target.";if($$WPUtil.IsNullOrEmpty(t))throw"Cannot scroll nothingness.";$$WPUtil.IsNullOrEmpty(n)&&(n=400),$$WPUtil.IsNullOrEmpty(i)&&(i=0),l=$afe.jq(e).offset().top,(r=$afe.jq(t)).animate({scrollTop:l-i},n,(function(){o&&o(),r.addClass("force_redraw"),window.setTimeout((function(){r.removeClass("force_redraw")}),1)}))},$$WPUtil.IsNullOrEmpty=function(t){return null==t||""===t},$$WPUtil.AddThrottledListener=function(t,e,i,n,o){var l;if($$WPUtil.IsNullOrEmpty(t))throw"Element to bind cannot be empty";if($$WPUtil.IsNullOrEmpty(e))throw"You must specificy at least one event to throttle";$.isNumeric(n)||(n=100),$$WPUtil.IsNullOrEmpty(o)&&$$WPUtil.IsNullOrEmpty(i)&&(i="change"),"function"!=typeof o&&(o=null),l=!1,$afe.jq(t).on(e,(function(e){l||(l=!0,window.setTimeout((function(){$$WPUtil.IsNullOrEmpty(i)||$afe.jq(t).trigger(i),$$WPUtil.IsNullOrEmpty(o)||o(e),l=!1}),n))}))},$$WPUtil.AddImmediateThrottledListener=function(t,e,i,n,o){var l;if($$WPUtil.IsNullOrEmpty(t))throw"Element to bind cannot be empty";if($$WPUtil.IsNullOrEmpty(e))throw"You must specificy at least one event to throttle";$.isNumeric(n)||(n=100),$$WPUtil.IsNullOrEmpty(o)&&$$WPUtil.IsNullOrEmpty(i)&&(i="change"),"function"!=typeof o&&(o=null),l=!1,$afe.jq(t).on(e,(function(e){l||(l=!0,$$WPUtil.IsNullOrEmpty(i)||$afe.jq(t).trigger(i),$$WPUtil.IsNullOrEmpty(o)||o(e),window.setTimeout((function(){l=!1}),n))}))},$$WPUtil.AddToggleListener=function(t,e,i,n,o,l,r,a,s,u){var c;if($$WPUtil.IsNullOrEmpty(e))throw"Toggle control ID is required.";$$WPUtil.IsNullOrEmpty(i)&&(i="click"),!0!==s&&!1!==s&&(s=!0),$$WPUtil.GetUniqueJQueryById(t,e).on(i,(function(i){var d,f,p;return d=$$WPUtil.GetUniqueJQueryById(t,e).safeAttr("data-toggle-for"),$$WPUtil.IsNullOrEmpty(d)||(p=(f=$afe.select("#"+d)).safeAttr("data-toggled"),c=$afe.jq(a),$.each(c,(function(t,e){var i;$afe.select('[data-toggle-for="'+$afe.jq(this).safeAttr("id")+'"]').removeClass(n).addClass(o),(i=$afe.jq(e)).safeAttr("data-toggled","false"),i.removeClass(l).addClass(r)})),$$WPUtil.SetElementToggled(f,$afe.jq(this),"true"!==p,l,r,n,o),"function"==typeof u&&u("true"===p,i)),!s}))},$$WPUtil.SetElementToggled=function(t,e,i,n,o,l,r){var a,s;s=$afe.jq(t),a=$$WPUtil.IsNullOrEmpty(e)?$afe.select('[data-toggle-for="'+s.safeAttr("id")+'"]'):$afe.jq(e),"true"===i||!0===i?(s.safeAttr("data-toggled","true"),s.removeClass(o).addClass(n),a.length>0&&a.removeClass(r).addClass(l)):(s.safeAttr("data-toggled","false"),s.removeClass(n).addClass(o),a.length>0&&a.removeClass(l).addClass(r))},$$WPUtil.ElementHasXOverflow=function(t){return t.offsetWidth<t.scrollWidth},$$WPUtil.ElementHasYOverflow=function(t){var e=$afe.select("html").get(0).offsetHeight,i=t.offsetHeight,n=t.scrollHeight;return e>i?i<n:e===i&&e===n?$afe.jq(window).height()<e:void 0},$$WPUtil.IsElementInView=function(t){var e,i,n;return isDataTile()&&null!=window.frameElement?(e=parent,n=window.frameElement.offsetTop):(e=window,n=0),i=$afe.jq(e),t.offset().top>=e.pageYOffset&&t.offset().top+t.height()+n<=e.pageYOffset+i.height()},$$WPUtil.ElementHasScrolledToBottom=function(t,e){var i,n=$afe.jq(t),o=$afe.select("html").get(0).offsetHeight,l=t.offsetHeight,r=t.scrollHeight;return $.isNumeric(e)||(e=.8),i=n,o===l&&o===r&&(i=$afe.jq(window)),i.scrollTop()+i.innerHeight()>=r*e},$$WPUtil.GUIDPrefix=function(t){return t?t+"_":""},$$WPUtil.GetUniqueJQueryById=function(t,e){return $afe.select("#"+$$WPUtil.GUIDPrefix(t)+e)},$$WPUtil.GetStringResource=function(t,e,i){var n=null,o="";return e&&(o=(n=$$WPUtil.GetUniqueJQueryById(t,"resources").find('div[data-rsrc-id="'+e+'"]')).safeAttr("data-rsrc-val"),$$WPUtil.IsNullOrEmpty(o)&&(o=n.html()),$$WPUtil.IsNullOrEmpty(i)||(o=$$WPUtil.ReplaceStringMnemonics(o,i))),o||""},$$WPUtil.ReplaceStringMnemonics=function(t,e){var i;return $$WPUtil.IsNullOrEmpty(t)?null:($$WPUtil.IsNullOrEmpty(e)||$.each(e,(function(e,n){i=new RegExp("@MYCHART@"+e+"@","gi"),t=t.replace(i,n)})),t)},$$WPUtil.PopulateComplexTemplate=function(t,e,i,n,o,l){var r,a,s,$;if($$WPUtil.IsNullOrEmpty(e))throw"You must supply a template ID";return $$WPUtil.IsNullOrEmpty(l)&&(l=0),$$WPUtil.IsNullOrEmpty(n)&&(n={}),$=(t?t+"_":"")+e+"_"+l,"true"===(r=$$WPUtil.GetUniqueJQueryById(t,e).clone()).safeAttr("data-template-children-only")?r=r.children():"true"===r.safeAttr("data-template-no-id")?r.safeAttr("id",""):r.safeAttr("id",$),$+="_",a=$$WPUtil.RecurseComplexTemplate(r,n,o,$),$$WPUtil.IsNullOrEmpty(i)||((s=$afe.jq(i)).empty(),a.safeAppendTo(s)),a},$$WPUtil.RecurseComplexTemplate=function(t,e,i,n,o,l){var r,a,s;return $.each(t,(function(r,a){var s,u,c,d,f,p,m,P,g,W,h,U,y,b,v;if(s=(a=$afe.jq(a)).safeAttr("data-template-group"),u=a.safeAttr("data-template-group-source"),g=a.safeAttr("data-template-source"),U=a.safeAttr("data-template-id"),f=p=m=!1,v=(a.safeAttr("data-template-type")||"").split(" "),$.each(v,(function(t,e){switch(e){case"collection":f=!0;break;case"object":p=!0;break;case"value":m=!0;break;case"nullable":P=!0;break;case"fill":h=!0}})),c=!$$WPUtil.IsNullOrEmpty(s)&&!$$WPUtil.IsNullOrEmpty(u),d=!$$WPUtil.IsNullOrEmpty(s)&&f,(p||m)&&P&&$$WPUtil.IsNullOrEmpty(e[g])||h)t=t.not(a.empty().remove());else if((f||p||c)&&!d)c&&(a=a.parent().children('[data-template-group="'+s+'"]'),g=u),b=$$WPUtil.IsNullOrEmpty(g)?e:e[g],p&&(b=[b]),p||$$WPUtil.IsNullOrEmpty(U)||(y=0),$.each(b,(function(e,o){var l,r;"function"==typeof i&&(o=i(g,e,o)),$$WPUtil.IsNullOrEmpty(o)||(l=a.clone(),c?(l.removeAttr("data-template-group"),l.removeAttr("data-template-group-source")):(l.removeAttr("data-template-type"),l.removeAttr("data-template-source")),l.safeInsertBefore(a.get(0)),r=$$WPUtil.RecurseComplexTemplate(l,o,i,n,U,y),$.isNumeric(y)&&(y+=1),l.safeReplaceWith(r),t=t.add(r))})),t=t.not(a.empty().remove());else{if(!$$WPUtil.IsNullOrEmpty(a.safeAttr("data-template-group")))return;a.children().length>0&&(W=$$WPUtil.RecurseComplexTemplate(a.children(),e,i,n,o,l),a.children().remove(),W.safeAppendTo(a),t=t.not(a).add(a))}})),r=$$WPUtil.SerializeNodes(t),"string"==typeof e&&(e={"#Value":e}),s=$.isNumeric(l),e["#ID"]=n+(o||"")+(o&&s?"_"+l:""),e["#NUM"]=s?l:"",a=dangerou$.parseHtml($$WPUtil.ReplaceTemplateMnemonics(r,e)),$.each(a,(function(t,e){var i,n,o=$afe.jq(e);i=o.safeAttr("data-src-url"),$$WPUtil.IsNullOrEmpty(i)||(o.safeAttr("src",i),o.removeAttr("data-src-url")),n=o.safeAttr("data-headers"),$$WPUtil.IsNullOrEmpty(n)||(o.safeAttr("headers",n),o.removeAttr("data-headers")),i=o.safeAttr("data-href-url"),$$WPUtil.IsNullOrEmpty(i)||(o.safeAttr("href",i),o.removeAttr("data-href-url"))})),a},$$WPUtil.SerializeNodes=function(t){var e,i="";return"function"==typeof XMLSerializer?(e=new XMLSerializer,$.each(t,(function(t,n){i+=n.outerHTML||e.serializeToString(n)}))):$.each(t,(function(t,e){i+=e.outerHTML||e.xml})),i},$$WPUtil.ReplaceTemplateMnemonics=function(t,e){var i;return $$WPUtil.IsNullOrEmpty(t)?null:($$WPUtil.IsNullOrEmpty(e)||$.each(e,(function(e,n){i=new RegExp("__"+e+"__","gi"),"string"==typeof n&&(n=HTMLEncode(n)),t=t.replace(i,n)})),t)},$$WPUtil.CenterContainerOnPage=function(t,e){var i,n=0;$afe.jq(window).height(),i=$afe.jq(t),e&&$$WPUtil.setScrollTop(0),(n=$$WPUtil.getScrollTop()+($afe.jq(window).height()-i.height())/2)<0&&(n=0),i.css({top:n+"px"})},$$WP.Utilities.isAbsoluteURL=function(t){return new RegExp("^(?:[a-z]+:)?//","i").test(t)},$$WPUtil.ShowUrlInLightbox=function(t,e,i,n,o){var l;(l=t.url||t)&&$.ajax($.extend({url:l,type:"GET",dataType:"html",success:function ShowUrlInLightbox$success(t){var e,l;$$WPUtil.ShowLightboxOverlay(null,n,o),l=$afe.select("#lightbox"),dangerou$.setHtml(l,""),e=$afe.select(".ajaxspinner").length>0,dangerou$.setHtml(l,t),e&&l.find(".ajaxspinner").remove(),$afe.select("body").addClass("showLightBox"),l.removeClass("hidden").show((function ShowUrlInLightbox$show(){$$WPUtil.CenterContainerOnPage(l)})).promise().done((function ShowUrlInLightbox$done(){i&&"function"==typeof i&&i()}))}},e||t.settings))},$$WPUtil.ShowContainerAsLightbox=function(t,e,i){var n,o={container:t,hideLightboxCallback:i};$$WPUtil.ShowLightboxOverlay(t,e,i),(n=$afe.jq(t)).show($$WPUtil._lightboxFadeDelay,(function(){n.find(".slider").trigger("matchCardHeights"),$$WPUtil.CenterContainerOnPage(t)})),n.on("keydown",(function(t){$$WPUtil.LightboxKeyDownHandler(t,n,$$WPUtil.LightboxEscKeyHandler,null,null,o)}))},$$WPUtil.LightboxEscKeyHandler=function(t,e){var i=e.container,n=e.hideLightboxCallback;$$WPUtil.HideLightbox(i,n),t.preventDefault()},$$WPUtil.ShowLightboxOverlay=function(t,e,i){var n=$afe.select("#lightbox_overlay");n.off("click"),n.on({click:function(){$$WPUtil.HideLightbox(t,i)}}),n.show($$WPUtil._lightboxFadeDelay).promise().done((function(){e&&"function"==typeof e&&e()}))},$$WPUtil.LightboxKeyDownHandler=function(t,e,i,n,o,l){var r,a,s;switch(a=(r=e.find("a[href]:not([tabindex='-1']), area[href]:not([tabindex='-1']), input:not([tabindex='-1']), select:not([tabindex='-1']), textarea:not([tabindex='-1']), button:not([tabindex='-1']), [tabindex]:not([tabindex='-1'])"))[0],s=r[r.length-1],t.which){case 9:t.shiftKey?document.activeElement===a&&($afe.jq(s).focus(),t.preventDefault()):document.activeElement===s&&($afe.jq(a).focus(),t.preventDefault());break;case 27:null!==i&&"function"==typeof i&&i(t,l);break;case 38:null!==n&&"function"==typeof n&&n(t,l);break;case 40:null!==o&&"function"==typeof o&&o(t,l)}},$$WPUtil.HideLightbox=function Epic$PatientAccess$Utilities$HideLightbox(t,e){!0!==$$WPUtil.PreventHideLightbox&&($$WPUtil.IsNullOrEmpty(t)||$afe.jq(t).hide($$WPUtil._lightboxFadeDelay),$afe.select(".lb_content").hide($$WPUtil._lightboxFadeDelay),$afe.select("#lightbox_overlay").hide($$WPUtil._lightboxFadeDelay),$afe.select("body").removeClass("showLightBox"),hideLightbox(),e&&"function"==typeof e&&e())},$$WPUtil.AjaxifyForm=function Epic$PatientAccess$Utilities$AjaxifyForm(t,e,i,n,o){var l={};e&&(l.url=$afe.jq(e).safeAttr("action"),l.type=$afe.jq(e).safeAttr("method"),l.sendFormData=!0,e.off("submit").on("submit",$$WPUtil.SubmitAjaxifiedForm(l,t,e,i,n,o)))},$$WPUtil.SubmitAjaxifiedForm=function(t,e,i,n,o,l){return function(){var r,a,s,u;return r=$$WPUtil.AjaxifyFormSubmitHandler(e,i,n,o,l),a=t.url,s=t.type,u=t.sendFormData?$afe.jq(i).serialize():{},!!$$WPUtil.ValidateForm(e,i)&&($.ajax({url:a,type:s,data:u,context:$afe.jq(i),datatype:"json",error:$$WPUtil.DisplayAjaxError,statusCode:{404:function(){}},success:r}),!1)}},$$WPUtil.AjaxifyFormSubmitHandler=function(t,e,i,n,o){return function(l){if("syncchart"!==l.action)if("endworkflow"!==l.action){if("showerrors"===l.action)return $$WPUtil.WriteErrorsToForm(t,$afe.jq(e),l.errors,l.Mnemonics),void $$WPUtil._invokeErrorCallback(i,l.errors);if($$WPUtil.RunCallbackForType(o),n&&"function"==typeof n){var r=!0;try{r=n(l)}catch(t){}if(!r)return}"lightbox"===l.action&&l.url.length>0?$$WPUtil.ShowUrlInLightbox(l):"redirect"!==l.action||window.location.assign(l.url||"/")}else $$WPUtil._invokeErrorCallback(i,l.errors);else $$WPUtil._invokeErrorCallback(i,l.info)}},$$WPUtil._invokeErrorCallback=function Epic$PatientAccess$Utilities$_invokeErrorCallback(t,e){if(t&&"function"==typeof t)try{t(e)}catch(t){$$WPUtil.ShowUrlInLightbox("Error")}},$$WPUtil.CallbackTypeEnum={Authenticate:"Authenticate"},$$WPUtil.RegisterCallbackForType=function Epic$PatientAccess$Utilities$SetCallbackForType(t,e){var i=$$WPUtil.CallbackTypeEnum[t];$$WP.CallbacksForType||($$WP.CallbacksForType={}),!$$WPUtil.IsNullOrEmpty(i)&&e&&"function"==typeof e&&($$WP.CallbacksForType[i]=e)},$$WPUtil.RunCallbackForType=function Epic$PatientAccess$Utilities$RunCallbackForType(t){var e,i=$$WPUtil.CallbackTypeEnum[t];$$WPUtil.IsNullOrEmpty(i)||(e=$$WP.CallbacksForType[i])&&"function"==typeof e&&e()},$$WPUtil.DisplayAjaxError=function Epic$PatientAccess$Utilities$DisplayAjaxError(t,e,i){alert("An error occurred while processing the request: "+e)},$$WPUtil.ValidateForm=function Epic$PatientAccess$Utilities$ValidateForm(t,e){var i={},n=!1;return e.find("[data-form-valmsg-for="+e.safeAttr("id")+"]").removeClass("field-validation-error").addClass("field-validation-valid").empty(),e.find("span[data-valmsg-for]").removeClass("field-validation-error").addClass("field-validation-valid").empty(),e.find("input").each((function(){if("true"===$afe.jq(this).safeAttr("data-val")){var t=$afe.jq(this).safeAttr("data-val-required");t&&""===this.value?(i[$afe.jq(this).safeAttr("name")]=t,n=!0):$afe.jq(this).removeClass("input-validation-error")}})),!n||($$WPUtil.WriteErrorsToForm(t,e,i),!1)},$$WPUtil.WriteErrorsToForm=function Epic$PatientAccess$Utilities$WriteErrorsToForm(t,e,i,n){var o,l,r={};for(o in i=$$WPUtil.MapValidationCodesFromServer(t,i,n),e.find("input").each((function(){var t=$afe.jq(this).safeAttr("name"),n=$afe.jq(this).safeAttr("id"),o=i[t];1!==r[t]&&(o?($afe.jq(this).addClass("input-validation-error"),dangerou$.setHtml(e.find('span[data-valmsg-for="'+n+'"]').removeClass("field-validation-valid").addClass("field-validation-error"),o),delete i[t],r[t]=1):($afe.jq(this).removeClass("input-validation-error"),e.find('span[data-valmsg-for="'+n+'"]').removeClass("field-validation-error").addClass("field-validation-valid").empty()))})),(l=i.formlevelmsg)?(dangerou$.setHtml(e.find('div[data-valmsg-summary="true"]').removeClass("validation-summary-valid").addClass("validation-summary-errors").find("ul").safeAppend("li"),l),delete i.formlevelmsg):e.find('div[data-valmsg-summary="true"]').removeClass("validation-summary-errors").addClass("validation-summary-valid").find("ul").empty(),i)i.hasOwnProperty(o)&&(l=i[o])&&dangerou$.setHtml(e.find('span[data-valmsg-for*="'+o+'"]').removeClass("field-validation-valid").addClass("field-validation-error"),l)},$$WPUtil.MapValidationCodesFromServer=function Epic$PatientAccess$Utilities$MapValidationCodesFromServer(t,e,i){var n,o;return $$WPUtil.GetUniqueJQueryById(t,"resources"),n={},$.each(e,(function(e,l){var r;$$WPUtil.IsNullOrEmpty(i)||(r=i[e]),o=$$WPUtil.GetStringResource(t,l,r),n[e]=o||l})),n},$$WPUtil.LogAction=function(t,e,i){var n=$afe.select("#logActionUrl").html();$.ajax(n,{type:"POST",action:e,mnemonicsString:JSON.stringify(i),suppressEpicDefaultAjaxErrorHandler:!0})},$$WPUtil.getScrollNode=function(){var t;return(t=isDataTile()?parent.document:document).scrollingElement||t.documentElement},$$WPUtil.ScrollableBody=function(){var t;return t=$$WPUtil.getScrollNode(),$afe.jq(t)},$$WPUtil.getScrollTop=function(){return $$WPUtil.getScrollNode().scrollTop},$$WPUtil.setScrollTop=function(t){$$WPUtil.IsNullOrEmpty(t)&&(t=0),$$WPUtil.getScrollNode().scrollTop=t},$$WPUtil.getScrollLeft=function(){return $$WPUtil.getScrollNode().scrollLeft},$$WPUtil.setScrollLeft=function(t){$$WPUtil.IsNullOrEmpty(t)&&(t=0),$$WPUtil.getScrollNode().scrollLeft=t},$$WPUtil.ActivateHelp=function(t){$afe.select('a[data-lightbox-guid="'+t+'"]').each((function(){$afe.jq(this).off("click").on("click",(function(){$$WPUtil.ShowContainerAsLightbox($$WPUtil.GetUniqueJQueryById(t,$afe.jq(this).safeAttr("data-lightbox-id")))}))}))},$$WPUtil.getDataTileScrollTop=function(t){return Math.max(0,-t.getBoundingClientRect().top)},$$WPUtil.SetupCustomTabbingForFields=function WPControl$LoginController$_SetupTabbing(t){var e,i,n;for(t[t.length],n=0;n<t.length;n++)e=n>0?t[n-1]:null,i=n<t.length-1?t[n+1]:null,t[n].on("keydown",{$tabFrom:e,$tabTo:i},$$WPUtil._CustomTabbingForField),null!==e&&null!==i&&t[n].safeAttr("tabindex",-1)},$$WPUtil._CustomTabbingForField=function WPControl$LoginController$_SetupTabbing(t){var e;9===t.keyCode&&null!==(e=t.shiftKey?t.data.$tabFrom:t.data.$tabTo)&&(e.focus(),t.stopPropagation(),t.preventDefault())},$$WPUtil.quickPopup=function(t,e){Array.isArray(t)?e.Components=t:e=$$WPUtil.mergeObjects({Components:t},e,!0);var i=new $$WPContain.Popup(e);return i.show(!0),i},$$WPUtil.SafeToRedirectOverrideSettings={},$$WPUtil.SafeToRedirect=function WPUtil$SafeToRedirect(t,e){var i,n;if(WP.Events.showBeforeUnloadMessage()){if(!0!==WP.Events.SafeToUnloadWarningDisplayed)return n={callback:t},$.extend(n,$$WPUtil.SafeToRedirectOverrideSettings),i=new $$WPComp.SafeToRedirectComponent(n),$$WPUtil.quickPopup(i,{positioningFunction:e})}else t(!0)},$$WPUtil.TryRedirect=function WPUtil$TryRedirect(t,e,i,n,o){var l,r,a,s=function WPUtil$TryRedirect(e){if(e){var l,r,a=$$WPUtil.parseQueryString(t).mode,s=($$WPUtil.queryString("mode"),$$WPUtil.TryRedirect._mustPickOrganizationModes),u=$$WPUtil.TryRedirect._mustPickOrganizationRoutes,redirect=function(t,e,i){var n,l;if($$WPUtil.IsH2GActivity(t))return-1===t.toLowerCase().indexOf(makeLink("").toLowerCase())&&(t=makeLink(t)),void(window.location=t);i&&"1"!==i&&!i.IsLocal?(n=(l=t.toLowerCase().indexOf(makeLink("").toLowerCase()))>-1?t.substr(l+makeLink("").length):t,"string"==typeof i?$$WP.CommunityUtilities.getOrganization(i,(function(t,e,i){$$WP.CommunityUtilities.openDeepLink("netredirect",i,{targetUrl:t},e?$$WP.CommunityUtilities.openDeepLinkType.InNewTab:$$WP.CommunityUtilities.openDeepLinkType.InPopup)}),[n,e]):$$WP.CommunityUtilities.openDeepLink("netredirect",i,{targetUrl:n},e?$$WP.CommunityUtilities.openDeepLinkType.InNewTab:$$WP.CommunityUtilities.openDeepLinkType.InPopup)):e?openWindow(t,"","","",o):window.location=t};if(!i){var c=$$WPUtil.parseQueryString(t).local,d=null;if(void 0!==c?"1"===c?l=!1:"0"===c&&(l=!0):s.indexOf(a)>-1?l=!0:$.each(u,(function(e,i){const n=t.indexOf(e),o=n+e.length;if(n>-1&&(o>=t.length||!/[a-zA-Z0-9]/.test(t[o])))return l=!0,a=i,void(d=makeLink("inside.asp?mode="+a))})),l)return-1!==["msgoptions","medrefill","custsvc","refrequest"].indexOf(a)&&(r=$$WP.Strings.get("PickOrganization","Messaging.Review")),void $$WP.CommunityUtilities.pickOrganization((function(t,e){"close"!==e&&(d&&(t=d),redirect(t,n,e))}),r,[t],a,$$WP.Strings.get("PickOrganizationTitle","Messaging.Review"));i="1"}redirect(t,n,i)}};l=(l=window.location.protocol+"//"+window.location.hostname).toLowerCase(),a=(r=t.toLowerCase()).substring(0,4),(n=n||r.indexOf(l)<0&&"http"===a)?s(!0):$$WPUtil.SafeToRedirect(s,e)},$$WPUtil.TryRedirect._mustPickOrganizationModes=["msgoptions","refrequest"],$$WPUtil.TryRedirect._mustPickOrganizationRoutes={"/AskQuestion":"msgoptions","/RequestReferral":"refrequest"},$$WPUtil.DidNotRedirect=function WPUtil$DidNotRedirect(){$$WPComp.SafeToRedirectComponent.canceledRedirect()},$$WPUtil.setActivity=function WPUtil$setActivity(){if(checkActivity&&checkActivity.sessionTimeout&&$$WPUtil.setActivity.msSinceLastActivity()>=checkActivity.sessionTimeout)return document.write(""),void(window.location=makeLink("default.asp"));$$WPUtil.setActivity.__lastActivity=new Date,$$WPUtil.IsNullOrEmpty($$WP.CommunityUtilities.getParentJumpGUID())||parent.postMessage(JSON.stringify({message:"setActivity",externalGUID:$$WP.CommunityUtilities.getParentJumpGUID()}),$$WP.CommunityUtilities.getParentDomain())},$$WPUtil.NotifyMobileOfActivity=function WPUtil$activity$notifyMobile(){window.Android&&window.Android.webViewIsActive?Android.webViewIsActive():window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.webViewIsActive&&window.webkit.messageHandlers.webViewIsActive.postMessage("")},$$WPUtil.checkActivity=function(t){checkActivity()},$$WPUtil.setActivity.msSinceLastActivity=function WPUtil$activity$timePassed(){return new Date-$$WPUtil.setActivity.__lastActivity},$$WPUtil.copyObject=function Utilities$CopyObject(t){if(!t)return null;if(!Array.isArray(t))return $$WPUtil.mergeObjects(t,{},!1,!0);var e,i,n;for(e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e},$$WPUtil.mergeObjects=function Utilities$mergeObjects(t,e,i,n){if((Array.isArray(t)||Array.isArray(e))&&console.error("mergeObjects cannot be used on arrays"),e=e||{},i&&(e=$$WPUtil.copyObject(e)),!t)return e;var o,l,r;for(l in r=function(t){return t&&"object"==typeof t&&!(t instanceof jQuery)&&!$$WPComp.isComponent(t)&&!Array.isArray(t)&&!(t instanceof Handlebars.SafeString)},t)void 0!==(o=t[l])&&(r(o)?e[l]=$$WPUtil.mergeObjects(t[l],e[l],!1,n):!n&&e[l]||(Array.isArray(o)&&(o=$$WPUtil.copyObject(o)),e[l]=o));return e},$$WP.Utilities.guaranteeExistence=function Utilities$GuaranteeExistence(t,e,i){t=t||$$WP;var n,o=e.split("."),l=o.length-1;for(n=0;n<l;n++)t.hasOwnProperty(o[n])||(t[o[n]]={}),t=t[o[n]];return t.hasOwnProperty(o[n])||(t[o[n]]=arguments.length>2?i:{}),t},$$WPUtil.preventEvent=function Utilities$preventEvent(t){return t.stopPropagation(),t.preventDefault(),!1},$$WPUtil.parseQueryString=function Util$parseQS(t){"&"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1));var e,i,n,o=t.substr(t.indexOf("?")+1).split("&"),l={};for(n=0;n<o.length;n++)-1===(e=o[n].indexOf("="))&&n>0?l[i]+="&"+o[n]:l[i=o[n].substr(0,e).toLowerCase()]=o[n].substr(e+1);return l},$$WPUtil.queryString=function Utilities$queryString(t){return $$WPUtil.queryString.parsed||($$WPUtil.queryString.parsed=$$WPUtil.parseQueryString(window.location.search)),$$WPUtil.queryString.parsed[t.toLowerCase()]||""},$$WPUtil.removeParamsFromQueryString=function Utilities$removeParamsFromQueryString(t){return $$WPUtil.queryString.parsed||($$WPUtil.queryString.parsed=$$WPUtil.parseQueryString(window.location.search)),"string"==typeof t?delete $$WPUtil.queryString.parsed[t.toLowerCase()]:t.forEach((function(t){delete $$WPUtil.queryString.parsed[t.toLowerCase()]})),Object.keys($$WPUtil.queryString.parsed).map((function(t){return t+"="+$$WPUtil.queryString.parsed[t]})).join("&")},$$WPUtil.verticalScrollBarWidth=function $$WPUtil$verticalScrollBarWidth(){var t,e,i,n;$$WPUtil.verticalScrollBarWidth._cached||(e=(t=$afe.renderTemplate($$WP.Templates.Core.scrollbarwidth)).children(0).get(0),document.body.appendChild(t.get(0)),i=e.offsetWidth,t.css("overflow","scroll"),(n=e.offsetWidth)===i&&(n=t.get(0).clientWidth),t.remove(),$$WPUtil.verticalScrollBarWidth._cached=i-n);return $$WPUtil.verticalScrollBarWidth._cached},$$WPUtil.preventAndroidLongPress=function(t,e,i){navigator.userAgent.indexOf("Android")>=0&&(1!==t.length||e||(e=t,i=""),e&&e.on("contextmenu",i,(function(t){t.preventDefault()})))},$$WPUtil.isBrowserCapableOf=function(t,e){var i;switch(t){case"flexbox":return void 0!==document.body.style.flex;case"input":return i=document.createElement("input"),$afe.jq(i).safeAttr("type",e.type),i.type===e.type;case"touchEvents":return"ontouchstart"in window||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>0;case"canvas":return!!window.HTMLCanvasElement;case"ActiveX":return!!window.ActiveXObject;case"Intl":return"object"==typeof Intl&&"DateTimeFormat"in Intl&&"NumberFormat"in Intl}},$$WPUtil.isValidBrowser=function(){return $$WPUtil.isBrowserCapableOf("canvas")&&!$$WPUtil.isBrowserCapableOf("ActiveX")&&$$WPUtil.isBrowserCapableOf("Intl")},$$WPUtil.addUrlParameter=function(t,e,i){return-1===t.indexOf("?")?t+="?":"&"!==t[t.length-1]&&(t+="&"),t+e+"="+i},$$WPUtil.isNaN=function(t){return isNaN(t)||!t&&0!==t},$$WPUtil.confirmFormSubmission=function(t,e,i,n,o,l,r){return i?$$WPUtil.quickMessageBoxByEnum(e,i,$$WPUtil.confirmFormSubmission.submitForm,[t,n]):$$WPUtil.quickMessageBox(e,l,o,$$WPUtil.confirmFormSubmission.submitForm,[t,n],"",r),!1},$$WPUtil.confirmFormSubmission.submitForm=function(t,e,i){var n;"function"==typeof e&&!1===e(t,i)||i===$$WP.Components.TOOLBARIDENTIFIER+"continue"&&(n=t.onclick,t.onclick=null,$(t).off(),t.click(),t.onclick=n)},$$WPUtil.quickMessageBoxByEnum=function(t,e,i,n,o){var l,r,a=$$WPUtil.quickMessageBoxByEnum.typeEnum;switch(e=e||$$WPUtil.quickMessageBoxByEnum.typeEnum.ContinueGoback){case a.ContinueGoback:l=$$WP.Strings.get("ContinueGobackTitle","Core.Utilities"),r=$$WPUtil.createContinueGoBackButtons();break;case a.DeleteGoback:l=$$WP.Strings.get("DeleteGobackTitle","Core.Utilities"),r=$$WPUtil.createDeleteGoBackButtons();break;case a.YesNo:l=$$WP.Strings.get("YesNoTitle","Core.Utilities"),r=$$WPUtil.createYesNoButtons();break;case a.Ok:l=$$WP.Strings.get("AlertTitle","Core.Utilities"),r=$$WPUtil.createOkButton();break;case a.RemoveGoback:l=$$WP.Strings.get("ContinueGobackTitle","Core.Utilities"),r=$$WPUtil.createRemoveGoBackButtons();break;case a.RestoreGoback:l=$$WP.Strings.get("ContinueGobackTitle","Core.Utilities"),r=$$WPUtil.createRestoreGoBackButtons();break;default:return}return $$WPUtil.quickMessageBox(t,l,r,i,n,o)},$$WPUtil.quickMessageBoxByEnum.typeEnum={ContinueGoback:1,DeleteGoback:2,YesNo:3,Ok:4,RemoveGoback:5,RestoreGoback:6},$$WPUtil.createContinueGoBackButtons=function(){return[new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Continue","Core.Utilities"),null,"completeworkflow","continue"),new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Goback","Core.Utilities"),null,"previousstep","cancel")]},$$WPUtil.createDeleteGoBackButtons=function(){return[new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Delete","Core.Utilities"),null,"inlinedelete","continue"),new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Goback","Core.Utilities"),null,"previousstep","cancel")]},$$WPUtil.createYesNoButtons=function(){return[new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Yes","Core.Utilities"),null,"completeworkflow","continue"),new $$WPComp.ComplexObjects.Button($$WP.Strings.get("No","Core.Utilities"),null,"previousstep","cancel")]},$$WPUtil.createOkButton=function(){return[new $$WPComp.ComplexObjects.Button($$WP.Strings.get("MessageBoxOK","global"),null,"otherbutton","continue")]},$$WPUtil.createRemoveGoBackButtons=function(){return[new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Remove","Core.Utilities"),null,"inlinedelete","continue"),new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Goback","Core.Utilities"),null,"previousstep","cancel")]},$$WPUtil.createRestoreGoBackButtons=function(){return[new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Restore","Core.Utilities"),null,"inlinesave","continue"),new $$WPComp.ComplexObjects.Button($$WP.Strings.get("Goback","Core.Utilities"),null,"previousstep","cancel")]},$$WPUtil.quickMessageBox=function(t,e,i,n,o,l,r){$$WPUtil.IsNullOrEmpty(e)||e===HTMLUnencode(e)||$$WP.Debug.logError("$$WPUtil.quickMessageBox was probably called with an HTML formatted title. The title should be raw text, not HTML");var a,s=$$WP.Strings.getNamespace("Global.Confirm");return a=new $$WPComp.MessageComponent({TitleText:e||s.getStringForTemplate("GenericConfirmTitle"),Message:t,callback:n,CallbackArgs:o,ToolbarButtons:i}),$$WPUtil.quickPopup(a,{Size:i.length<3?$$WPContain.Popup.SizeEnum.SMALL:$$WPContain.Popup.SizeEnum.MEDIUM,Class:l+" sm-autosizedpopup",HasBackButton:r})},$$WPUtil.generateGUID=function(){return $$WPUtil.generateGUID._last=$$WPUtil.generateGUID._last||0,$$WPUtil.generateGUID._last++,$$WPUtil.generateGUID._last},$$WPUtil.generateGUID._last,$$WPUtil.getDomain=function(t){try{return t.protocol+"//"+t.host}catch(t){return null}},$$WPUtil.canWriteCookies=function(){setCookie("testCookie","testValue",!0);var t=""!==getCookie("testCookie",!0);return t&&deleteCookie("testCookie",!0),t},$$WPUtil.canWriteCookiesAsync=function(){return new Promise((function(t,e){"function"==typeof document.requestStorageAccess?($$WPUtil.canWriteCookies()&&t(!0),document.requestStorageAccess().then((function(){t($$WPUtil.canWriteCookies())})).catch((function(){t(!1)}))):t($$WPUtil.canWriteCookies())}))},$$WPUtil.cssValueToPixels=function(t){return t.indexOf("rem")>-1?($$WPUtil.cssValueToPixels.emSize||($$WPUtil.cssValueToPixels.emSize=parseFloat($afe.select("body").css("font-size"))),Math.round(parseFloat(t,10)*$$WPUtil.cssValueToPixels.emSize)):t.indexOf("px")>-1?parseFloat(t,10):void(isNaN(parseFloat(t,10))||console.log("CSS value cannot be converted to pixels: "+t))},$$WPUtil.instantiateComponent=function(t,e,i){var n={};return n.SupportedComponents=t,n.$parent=$afe.select("#"+e),i&&(n.ComponentProperties=i),new $$WPContain.HTMLTemplateContainer(n)},$$WPUtil.getPopupParent=function(t){return t.parents("#main, #sidebar, #lightbox, .Popup, .direct_message, .menudetailstable.leftmenu .leftcolumn, .popupOwner, #listHolder")},$$WPUtil.positionElementNear=function(t,e){var i,n,o,l,r,a,s,$,u,c,d;return t.removeClass("onRight onLeft onBottom onTop"),e.removeClass("onRight onLeft onBottom onTop"),n=(i=$$WPUtil.getPopupParent(e)).boxModel(!1),u=i[0].offsetWidth-i[0].clientWidth,c=0,"main"!==i.safeAttr("id")&&"sidebar"!==i.safeAttr("id")||(n.top+=$afe.select("#header").outerHeight(),(d=$afe.select("#footer").outerHeight(!1))>0&&(n.height-=d,n.bottom=n.top+n.height)),l=t.boxModel(!1),s=null,a=null,400<n.width?e.outerWidth(400):(e.outerWidth(n.width-16),c=n.left+8),o=e.boxModel(!1),(r={toRight:n.right-l.right-u,toLeft:l.left-n.left,above:l.top-n.top,below:n.bottom-l.bottom}).toRight>o.width?(t.addClass("onRight"),e.addClass("onRight"),s=l.right+c):r.above>o.height?(t.addClass("onTop"),e.addClass("onTop"),a=l.top-o.height,$=!0):r.toLeft>o.width?(t.addClass("onLeft"),e.addClass("onLeft"),s=l.left-o.width+c):r.below>o.height&&(t.addClass("onBottom"),e.addClass("onBottom"),a=l.bottom),null!==s?l.bottom-o.height>n.top?a=l.bottom-o.height+2:l.top+o.height<n.bottom?(a=l.top-2,e.addClass("infoPopupAlignTop")):((a=l.top+l.height/2-o.height/2)<n.top||a>n.bottom)&&(a=n.top,$$WP.Debug.log("Popup cannot be fit to screen")):null!==a?l.left+o.width+u<n.right?s=l.left-2+c:l.right-o.width>n.left?s=l.right-o.width+2+c:(s=l.left+l.width/2-o.width/2+c,n.width<o.width+s+u&&(s=n.left+8,e.outerWidth(n.width-16-u),$&&(o=e.boxModel(!1),a=l.top-o.height)),(s<n.left||s>n.right)&&(s=n.left+8,e.outerWidth(n.width-16-u),$&&(o=e.boxModel(!1),a=l.top-o.height),$$WP.Debug.log("Popup cannot be fit to screen"))):($$WP.Debug.log("Popup cannot be fit to screen"),t.addClass("onRight"),a=l.top,s=l.right),{top:a,left:s}},$$WPUtil.positionElementNearRTL=function(t,e){var i,n,o,l,r,a,s,$,u;return t.removeClass("onRight onLeft onBottom onTop"),e.removeClass("onRight onLeft onBottom onTop"),n=(i=e.parents("#main, #sidebar, #lightbox, .Popup, .direct_message, .menudetailstable.leftmenu .leftcolumn, .popupOwner")).boxModel(!1),"main"!==i.safeAttr("id")&&"sidebar"!==i.safeAttr("id")||(n.top+=$afe.select("#header").outerHeight(),(u=$afe.select("#footer").outerHeight(!1))>0&&(n.height-=u,n.bottom=n.top+n.height)),l=t.boxModel(!1),r={toRight:n.right-l.right,toLeft:l.left-n.left,above:l.top-n.top,below:n.bottom-l.bottom},s=null,a=null,400<n.width?e.outerWidth(400):e.outerWidth(n.width),o=e.boxModel(!1),r.toLeft>o.width?(t.addClass("onRight"),e.addClass("onRight"),s=l.right):r.below>o.height?(t.addClass("onBottom"),e.addClass("onBottom"),a=l.bottom):r.toRight>o.width?(t.addClass("onLeft"),e.addClass("onLeft"),s=l.left-o.width):r.above>o.height&&(t.addClass("onTop"),e.addClass("onTop"),a=l.top-o.height,$=!0),null!==s?l.bottom-o.height>n.top?a=l.bottom-o.height+2:l.top+o.height<n.bottom?(a=l.top-2,e.addClass("infoPopupAlignTop")):((a=l.top+l.height/2-o.height/2)<n.top||a>n.bottom)&&(a=n.top,$$WP.Debug.log("Popup cannot be fit to screen")):null!==a?l.left+o.width<n.right?s=l.right-o.width+2:l.right-o.width>n.left?s=l.left-2:o.width===n.width?(e.outerWidth(n.width-16),s=l.left+l.right-n.right+8):(s=l.left+l.width/2-o.width/2,o.left<n.left&&(s=l.left+l.right-n.right+8,e.width(n.width-32),$&&(o=e.boxModel(!1),a=l.top-o.height)),(s<l.right-n.right+l.left||s>n.right+l.right+l.left)&&(s=l.left+l.right-n.width-n.left,$$WP.Debug.log("Popup cannot be fit to screen"))):($$WP.Debug.log("Popup cannot be fit to screen"),t.addClass("onRight"),a=l.top,s=l.right),{top:a,left:s}},$$WPUtil.handlePopupInstructions=function(t,e){var i=void 0;"focus"===t.type||"mouseenter"===t.type||"click"===t.type?i=!0:("blur"===t.type||"mouseleave"===t.type||"keydown"===t.type&&27===t.keyCode)&&(i=!1),void 0!==i&&($$WPUtil.togglePopupInstructions($afe.jq(t.target),i,e),t.stopPropagation())},$$WPUtil.handlePopupInstructionsKeydown=function(t,e){"keydown"===t.type&&27===t.keyCode&&$afe.select("#main").find(".popupiconcontainer .popupinstructionsicon.showPopup").each((function(){var t=$afe.jq(this);$$WPUtil.togglePopupInstructions(t,!1,e)}))},$$WPUtil.togglePopupInstructions=function(t,e,i){var n,o,l,r,a,s;i=i||"Global",t.hasClass("popupiconcontainer")||(t=t.parents(".popupiconcontainer").first()),0!==t.length&&(l=(n=t.find(".popupInstructions")).siblings(".popupinstructionsicon"),o=n.parents("#main, #sidebar, .Popup, .popupOwner"),e?(r="PopupHelpIconAltFull",l.find("img").data("altnode")&&(r=l.find("img").data("altnode")+"Full"),l.find("img").safeAttr("alt",$$WP.Strings.get(r,i)),n.removeClass("hidden isblur"),l.addClass("showPopup"),o.addClass("allowOverflow"),"1"!==l.safeAttr("data-ispositioned")&&(s=l.offset(),"rtl"==$afe.select("html").safeAttr("dir")?((a=$$WPUtil.positionElementNearRTL(l,n)).top-=s.top,a.left-=s.left,n.css({right:a.left+"px",top:a.top+"px"})):((a=$$WPUtil.positionElementNear(l,n)).top-=s.top,a.left-=s.left,n.css({left:a.left+"px",top:a.top+"px"})),n.safeAttr("data-ispositioned","1"))):(n.addClass("isblur"),window.setTimeout((function(t,e,n){var o=e.find("img").data("altnode")||"PopupHelpIconAlt";n.hasClass("isblur")&&(t.removeClass("allowOverflow"),n.removeClass("isblur"),n.addClass("hidden"),e.removeClass("showPopup"),e.find("img").safeAttr("alt",$$WP.Strings.get(o,i)))}),100,o,l,n)))},$$WPUtil.handlePopupEndAnchor=function(t,e){var i,n,o,l;e=e||"Global",(i=$afe.jq(t.target)).hasClass("popupiconcontainer")?$popupiconcontainer=i:$popupiconcontainer=i.parents(".popupiconcontainer").first(),0!==$popupiconcontainer.length&&(l=(n=$popupiconcontainer.find(".popupInstructions")).siblings(".popupinstructionsicon"),o=n.parents("#main, #sidebar, .Popup"),"keyup"===t.type&&"Tab"===t.key&&!1===t.shiftKey?(n.addClass("isblur"),window.setTimeout((function(t,i,n){var o=i.find("img").data("altnode")||"PopupHelpIconAlt";n.hasClass("isblur")&&(t.removeClass("allowOverflow"),n.removeClass("isblur"),n.addClass("hidden"),i.removeClass("showPopup"),i.find("img").safeAttr("alt",$$WP.Strings.get(o,e)))}),100,o,l,n),WP.DOM.Search.getNextFocusable(t.target).focus()):"keyup"===t.type&&"Tab"===t.key&&!0===t.shiftKey&&WP.DOM.Search.getPreviousFocusable($popupiconcontainer[0].parentNode).focus())},$$WPUtil.printHtmlClass=function(t,e){var i;i=$afe.select("."+t),$$WPUtil.printElement(i)},$$WPUtil.printImage=function(t){var e=dangerou$.parseHtml("<img src='"+t+"' style='height: 100%' />");$$WPUtil.printElement(e)},$$WPUtil.printElement=function(t){var e,i;i=openWindow("","Print","resizable"),e=$afe.jq(t).get(0).outerHTML,i.focus(),dangerou$.setHtml(i.document.body,e),window.setTimeout((function(t){t.print(),t.close()}),10,i)},$$WPUtil.postify=function(t){var e={},buildResult=function(t,i){for(var n in t){var o=isFinite(n)?(""!=i?i:"")+"["+n+"]":(""!=i?i+".":"")+n;switch(typeof t[n]){case"number":case"string":case"boolean":e[o]=t[n];break;case"object":buildResult(t[n],""!=o?o:n)}}};return buildResult(t,""),e},$$WPUtil.postForm=function(t,e,i){var n=$afe.jq(document.createElement("form"));if(n.safeAttr("method","post"),n.safeAttr("action",t),n.safeAttr("target",i),e)for(var o=0;o<e.length;o++){var l=e[o],r=$afe.jq(document.createElement("input"));r.safeAttr("type","hidden"),r.safeAttr("name",l.Name),r.safeAttr("value",l.Value),n.safeAppend(r)}$afe.select("body").safeAppend(n),n.submit(),$afe.select("body").remove(n)},$$WPUtil.generateRandomGUID=function generateRandomGUID(){var t,e,i="";for(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<16;e++)i+=t.charAt(Math.floor(Math.random()*t.length));return i},$$WPUtil.highlightNodeText=function(t,e){var i,n,o,l,r;if(null!==t&&null!==(i=t.childNodes)&&0!==i.length)try{for(n=new RegExp("("+e+")","gi"),l=0;l<i.length;l+=1)null!==(o=i[l])&&(3===o.nodeType?n.test(o.nodeValue)&&(r=document.createElement("span"),dangerou$.setHtml(r,HTMLEncode(o.nodeValue).replace(n,'<span class="hilite">$1</span>')),t.insertBefore(r,o),t.removeChild(o)):1===o.nodeType&&$$WPUtil.highlightNodeText(o,e))}catch(t){}},$$WPUtil.createAriaLabel=function(t,e){var i=$afe.select("#"+t),n=$afe.select("#arialabels");0===i.length&&(0===n.length&&(n=$afe.jq(document.body).safeAppend($$WP.SimpleTemplates.Div({id:"arialabels"}))),i=$$WP.SimpleTemplates.Span({class:"clearlabel",id:t},e),n.safeAppend(i))},$$WPUtil.addPopupListener=function(t,e){null==t&&(t=$afe.select("#main")),document.addEventListener("keydown",(function(t){$$WPUtil.handlePopupInstructionsKeydown(t,e)})),t.find(".popupiconcontainer").each((function(){var t=$afe.jq(this);$$WPUtil.addSinglePopupListener(t,e)}))},$$WPUtil.AddPopupListener=$$WPUtil.addPopupListener,$$WPUtil.addSinglePopupListener=function(t,e,i){t.off().hover($$WPUtil.handlePopupInstructions),t.find(".popupinstructionsicon").off().on("blur focus keydown click",(function(t){$$WPUtil.handlePopupInstructions(t,e)})),t.find(".popupInstructions").off().on("blur focus keydown click",(function(t){$$WPUtil.handlePopupInstructions(t,e)})),i&&document.addEventListener("keydown",(function(t){$$WPUtil.handlePopupInstructionsKeydown(t,e)}))},$$WPUtil.removePopupListener=function(t){null==t&&(t=$afe.jq("#main"));var e=t.find(".popupiconcontainer");e.off(),e.find(".popupinstructionsicon").off(),e.find(".popupInstructions").off()},$$WPUtil.isValidPhoneNumber=function(t){return new RegExp(/^\+?\d{6,13}((x|X)?\d{4})?$/).test(t)},$$WPUtil.PrintAndAuditNET=function(){window.print(),$.ajax({url:makeLink("Home/AuditPrint"),type:"POST",data:{title:document.title}})},$$WPUtil.clearAlertCache=function(){},$$WPUtil.logoutAndShowError=function(t){$$WP.Utilities.TryRedirect(makeLink("Home/Logout?error="+t))},$$WPUtil.regExEscapeString=function WP$Utilities$regExEscapeString(t){var e,i;if("string"!=typeof t)return"";for(e="",i=0;i<t.length;i++)e+="\\u"+("0000"+t.charCodeAt(i).toString(16)).substr(-4);return e},$$WPUtil.IsSupportedChars=function WP$Utilities$IsSupportedChars(t){return new RegExp(/^[\x09\x0A\x0D\x20-\x7E\xA0-\xFF\u0152\u0153\u0160\u0161\u0178\u017D\u017E\u0192\u02C6\u02DC\u2013\u2014\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2026\u2030\u2039\u203A\u20AC\u2122]*$/).test(t)},$$WPUtil.RemoveUnsupportedChars=function WP$Utilities$RemoveUnsupportedChars(t){return t.split("").filter($$WPUtil.IsSupportedChars).join("")},$$WPUtil.IsH2GActivity=function WP$Utilities$IsH2GActivity(t){return!!$$WPUtil.IsVisitsListUrl(t)||(!!$$WPUtil.IsTestResultsUrl(t)||(!!$$WPUtil.IsMedsListUrl(t)||(!!$$WPUtil.IsAllergiesListUrl(t)||!!$$WPUtil.IsHealthIssuesUrl(t))))},$$WPUtil.IsVisitsListUrl=function WP$Utilities$IsVisitsListUrl(t){return-1!==(t=t.toLowerCase()).indexOf("visits/visitslist")||-1!==t.indexOf("mode=appointments")||-1!==t.indexOf("mode=visits")||-1!==t.indexOf("mode=recentappts")},$$WPUtil.IsTestResultsUrl=function WP$Utilities$IsTestResultsUrl(t){return-1!==(t=t.toLowerCase()).indexOf("clinical/testresults")||-1!==t.indexOf("mode=labs")},$$WPUtil.IsMedsListUrl=function WP$Utilities$IsMedsListUrl(t){return-1!==(t=t.toLowerCase()).indexOf("clinical/medications/list")||-1!==t.indexOf("mode=medslist")},$$WPUtil.IsAllergiesListUrl=function WP$Utilities$IsAllergiesListUrl(t){return-1!==(t=t.toLowerCase()).indexOf("clinical/allergies")||-1!==t.indexOf("mode=allergies")},$$WPUtil.IsHealthIssuesUrl=function WP$Utilities$IsHealthIssuesUrl(t){return-1!==(t=t.toLowerCase()).indexOf("clinical/healthissues")||-1!==t.indexOf("mode=hlthissues")},$$WPUtil.IsHealthSummaryUrl=function WP$Utilities$IsHealthSummaryUrl(t){return-1!==(t=t.toLowerCase()).indexOf("mode=snapshot")},$$WPUtil.defaultAjaxErrorHandler=function WP$Utilities$defaultAjaxErrorHandler(t,e,i,n){var o,l,r,a;if(!0!==$$WP.IsEpicAjaxErrorHandlerDisabled)if(i.suppressEpicDefaultAjaxErrorHandler||i.hasOwnErrorHandler||200===e.status)$$WP.Debug.IsEnabled&&$$WP.Debug.logError("Ajax call to "+i.url+" received an error response and has the default error handler suppressed.",!0);else if("abort"===e.statusText||"canceled"===e.statusText||function userAborted(t){return 0===t.status&&!t.getAllResponseHeaders()}(e))$$WP.Debug.log(e.statusText+" ajax call to "+i.url+".",!0);else if(!i.hasOwnErrorHandler){if(WP.Events.cancelBeforeUnload(),!$$WP.Debug.IsEnabled&&($afe.select("#content").children().addClass("hidden"),$$WP.Utilities.UI.IsMobile))return void(window.location.href=makeLink("500.aspx"));if(0!==$afe.select(".AjaxErrorHandler.Popup").length)return;a=$$WPContain.Popup.SizeEnum.SMALL,$$WP.Debug.IsEnabled&&void 0!==e.responseText?(l=(r=(r=e.responseText).substring(r.indexOf("<body"),r.indexOf("</body"))).substring(r.indexOf(">")+1,r.length),a=$$WPContain.Popup.SizeEnum.LARGE):l=$$WP.Strings.get("DefaultAjaxErrorHandlerMessage","global"),o=new $$WPComp.MessageComponent({TitleText:$$WP.Strings.get("DefaultAjaxErrorHandlerTitle","global"),Message:l,ToolbarButtons:[new $$WPComp.ComplexObjects.Button($$WP.Strings.get("ClosePopupButton","Core.Utilities"),null,"cancelworkflow")]}),$$WPUtil.quickPopup(o,{Size:a,positioningFunction:$$WPContain.Positions.InsideNearTop,HasBackButton:!1,Class:"AjaxErrorHandler"}),$afe.select("#content").removeAttr("id"),$afe.select(".messageComponent").find("#content").removeAttr("id")}},$$WPUtil.isLocalStorageAvailable=function WP$Utilities$isLocalStorageAvailable(){var t="test";try{window.localStorage.setItem(t,t),window.localStorage.removeItem(t)}catch(t){return!1}return!0},$$WPUtil.UseHTML5InputControls=function $$WPUtil$UseHTML5InputControls(){$$WP.Utilities.isBrowserCapableOf("input",{type:"number"})&&$afe.select("input[data-inputtype='number']").each((function(){this.type="number"})),$$WP.Utilities.isBrowserCapableOf("input",{type:"phone"})&&$afe.select("input[data-inputtype='phone']").each((function(){this.type="phone"})),$$WP.Utilities.isBrowserCapableOf("input",{type:"email"})&&$afe.select("input[data-inputtype='email']").each((function(){this.type="email"})),$$WP.Utilities.isBrowserCapableOf("input",{type:"date"})&&$afe.select("input[data-inputtype='date']").each((function(){this.type="date"})),$$WP.Utilities.isBrowserCapableOf("input",{type:"time"})&&$afe.select("input[data-inputtype='time']").each((function(){this.type="time"}))},$$WPUtil.FixScrollingForIOS=function $$WPUtil$FixScrollingForIOS(t){t.on("blur","input, textarea",(function(){window.scrollBy(0,0)}))},$$WPUtil.ShowAjaxSpinner=function $$WPUtil$ShowAjaxSpinner(t,e){if(null!==t){if(t.length>1&&$$WP.Debug.logError("Multiple ajax spinners passed to ShowAjaxSpinner"),!0!==e&&t.removeClass("hidden"),!t.hasClass("hidden")){var i=t.contents();t.empty(),t.safeAppend(i)}!0!==e&&setTimeout((function(t){$$WPUtil.ShowAjaxSpinner(t,!0)}),1500,t)}},$$WPUtil.HideAjaxSpinner=function $$WPUtil$HideAjaxSpinner(t){t.addClass("hidden")},$$WPUtil.GetRawString=function(t){return t&&!$$WPUtil.IsNullOrEmpty(t.string)?t.string:"string"==typeof t?t:""},$$WPUtil.GetQueryStringParameterValue=function $$WPUtil$GetQueryStringParameterValue(t,e){var i;return null===(i=new RegExp("[?&]"+e+"=([^&#]*)").exec(t))?"":decodeURIComponent(i[1])},$$WPUtil.GetTextareaBucketClass=function $WPUtil$GetTextareaBucketClass(t){if(t<1)return"";var e=t-1-(t-1)%25+25;return e>300&&(e="unlimited"),"textbucket"+e+"chars"},$$WPUtil.AddSingleLineTextareaListeners=function $WPUtil$AddSingleLineTextareaListeners(){$afe.select(".singleLineFreeText").each((function(){this.addEventListener("keydown",(function(t){13===(t.which||t.keyCode)&&t.preventDefault()})),this.addEventListener("input",(function(t){t.target.value=t.target.value.replace(/\n/g,"")}))}))},$$WPUtil.SetCrossDomainData=function $WPUtil$SetCrossDomainData(t){window.parent.postMessage({method:"setValues",data:t},$$WP.ParentDomain)},$$WPUtil.DeleteCrossDomainData=function $WPUtil$DeleteCrossDomainData(t){window.parent.postMessage({method:"deleteLocalStorageValue",key:t},$$WP.ParentDomain)},$$WPUtil.GetCrossDomainData=function $WPUtil$GetCrossDomainData(t){return new Promise((function(e){var i=new MessageChannel;i.port1.onmessage=function(t){e(t.data)},window.parent.postMessage({method:"getValue",key:t},$$WP.ParentDomain,[i.port2])}))},$$WPUtil.GetIframeWidth=function $WPUtil$GetIframeWidth(){return new Promise((function(t){var e=new MessageChannel;e.port1.onmessage=function(e){t(e.data)},window.parent.postMessage({method:"getWidth",id:$$WP.WidgetID},$$WP.ParentDomain,[e.port2])}))},$$WPUtil.SetCrossDomainIframeHeight=function $WPUtil$SetCrossDomainIframeHeight(t){window.parent.postMessage({method:"setHeight",height:t,id:$$WP.WidgetID},$$WP.ParentDomain)},$$WPUtil.SetCrossDomainIframeMinHeight=function $WPUtil$SetCrossDomainIframeMinHeight(t){window.parent.postMessage({method:"setMinHeight",height:t,id:$$WP.WidgetID},$$WP.ParentDomain)},$$WPUtil.ScrollTopOfTheIframeCrossDomain=function $WPUtil$ScrollTopOfTheIframeCrossDomain(){window.parent.postMessage({method:"scrollTopOfTheIframe",id:$$WP.WidgetID},$$WP.ParentDomain)},$$WPUtil.RefreshHeader=function $WPUtil$RefreshHeader(){var refreshPage=function(){alert($$WP.Strings.get("WidgetRefreshAlert","Global"))||window.location.reload()};$$WP.WidgetMode&&$.ajax({url:makeLink("Widget/RefreshHeader"),type:"GET",success:function(t){t.headerValue?$$WP._WidgetToken=t.headerValue:refreshPage()},error:refreshPage})},$$WPUtil.GetPageNonce=function $WPUtil$GetPageNonce(){var t=document.getElementById("cspScripts");return t?t.nonce||t.getAttribute("nonce"):""},$$WPUtil.LogTabClick=function $WPUtil$LogTabClick(t,e){!t||e<=0||getCSRFTokenAsQS((function(){$.ajax({url:makeLink("Home/LogTabClick"),type:"POST",data:{idnId:t,count:e}})}))},$$WPUtil.SendBeacon=function $WPUtil$SendBeacon(t,e,i,n){return i=void 0===i||i,void 0===n&&"string"!=typeof e&&i?($$WP.Debug.logError("contentType must be specified when calling SendBeacon with data that is not a string."),!1):(n=void 0!==n?n:"text/plain;charset=UTF-8",navigator.sendBeacon?navigator.sendBeacon(t,e):!!i&&($.ajax({url:t,method:"POST",data:e,contentType:n}),!0))};